import{m as Fa,n as _a,p as Ra,r as u,j as e,H as c,P as d,N as Ua,q as Ke,t as Ya,E as Wa,v as Ga,w as qa,B as Qa,C as Ha,M as Xa,x as $a}from"./vendor-react-BsSNOS8Q.js";import{u as Ie}from"./useQuery-BVCX2I2e.js";import{A as za,c as m,D as Ve,n as Pe,p as Le,a4 as Ka,a5 as Ja,a6 as Za,r as Q,B as M,s as L,y as et,u as st,d as at,e as tt,q as lt,v as rt,x as nt}from"./index-Dy6kfXgl.js";import{f as ie,j as it,k as ct,u as je,m as dt,a as ot,d as xt,n as mt,o as ut,p as pt}from"./flow-DNUxnNLE.js";import{I as x}from"./input-DzxWI4AI.js";import{b8 as De,b9 as ht,p as A,aj as Ae,W as Je,aI as Ze,b5 as es,ba as ss,Z as Fe,w as ce,af as se,z as de,aD as as,K as ts,al as ls,bb as rs,aK as ns,bc as is,ak as X,bd as be,s as pe,be as cs,bf as ds,ax as os,b as xs,bg as ms,bh as _e,bi as us,bj as ps,t as hs,bk as js,au as Ns,am as gs,a4 as bs,bl as ys,bm as vs,bn as fs,F as ws,az as jt,i as Nt,bo as gt,u as Ye,ae as bt,X as Cs,d as ue,N as We,E as yt,f as vt,I as ft,ap as Be,J as Ge,g as wt,A as qe,S as Ct,c as St,H as Tt,B as kt,o as Et,ai as Ot,P as Mt,aE as It,aP as Vt,D as Pt,bp as Lt}from"./vendor-icons-BJR3KiwM.js";import{S as H}from"./scroll-area-irYH5T_m.js";import{T as Bt,a as Dt,b as le,c as re}from"./tabs-DwCQbPfI.js";import{L as r}from"./label-JYfqQfxR.js";import{S as Oe}from"./separator-CWSs9kFh.js";import{S as Ne}from"./switch-Cq4UTywH.js";import{T as G}from"./textarea-IhvR0N2O.js";import{S as j,a as N,b as g,c as b,d as i}from"./select-CXJ6Bhul.js";import{b as Ss,u as At,L as Qe}from"./vendor-router-b1Q1Drqs.js";import"./vendor-charts-l0_txfiz.js";import"./vendor-radix-DB8xhlcH.js";const He={id:null,name:"Untitled Workflow",description:"",nodes:[],edges:[],selectedNodeId:null,selectedEdgeId:null,isModified:!1},Ts=za((a,n)=>({...He,setWorkflow:o=>a({id:o.id,name:o.name,description:o.description,nodes:o.nodes,edges:o.edges,isModified:!1,selectedNodeId:null,selectedEdgeId:null}),setName:o=>a({name:o,isModified:!0}),setDescription:o=>a({description:o,isModified:!0}),resetWorkflow:()=>a(He),markSaved:()=>a({isModified:!1}),setNodes:o=>a({nodes:o,isModified:!0}),onNodesChange:o=>{a({nodes:Ra(o,n().nodes),isModified:!0})},addNode:o=>a(p=>({nodes:[...p.nodes,o],isModified:!0})),updateNodeData:(o,p)=>a(f=>({nodes:f.nodes.map(w=>w.id===o?{...w,data:{...w.data,...p}}:w),isModified:!0})),deleteNode:o=>a(p=>({nodes:p.nodes.filter(f=>f.id!==o),edges:p.edges.filter(f=>f.source!==o&&f.target!==o),selectedNodeId:p.selectedNodeId===o?null:p.selectedNodeId,isModified:!0})),setEdges:o=>a({edges:o,isModified:!0}),onEdgesChange:o=>{a({edges:_a(o,n().edges),isModified:!0})},onConnect:o=>{a({edges:Fa({...o,id:`edge-${Date.now()}`,type:"insertable",animated:!0},n().edges),isModified:!0})},deleteEdge:o=>a(p=>({edges:p.edges.filter(f=>f.id!==o),selectedEdgeId:p.selectedEdgeId===o?null:p.selectedEdgeId,isModified:!0})),selectNode:o=>a({selectedNodeId:o,selectedEdgeId:null}),selectEdge:o=>a({selectedEdgeId:o,selectedNodeId:null}),deleteSelected:()=>a(o=>{const{selectedNodeId:p,selectedEdgeId:f,nodes:w,edges:T}=o;return p?{nodes:w.filter(y=>y.id!==p),edges:T.filter(y=>y.source!==p&&y.target!==p),selectedNodeId:null,isModified:!0}:f?{edges:T.filter(y=>y.id!==f),selectedEdgeId:null,isModified:!0}:o})})),O=[{value:"NSE",label:"NSE"},{value:"BSE",label:"BSE"},{value:"NFO",label:"NFO"},{value:"BFO",label:"BFO"},{value:"CDS",label:"CDS"},{value:"BCD",label:"BCD"},{value:"MCX",label:"MCX"},{value:"NSE_INDEX",label:"NSE_INDEX"},{value:"BSE_INDEX",label:"BSE_INDEX"}],ee=[{value:"MIS",label:"MIS",description:"Intraday (auto square-off)"},{value:"CNC",label:"CNC",description:"Cash & Carry for equity delivery"},{value:"NRML",label:"NRML",description:"Normal for futures and options"}],Me=[{value:"MARKET",label:"Market",description:"Execute at current market price"},{value:"LIMIT",label:"Limit",description:"Execute at specified price or better"},{value:"SL",label:"Stop Loss Limit",description:"Stop loss with limit price"},{value:"SL-M",label:"Stop Loss Market",description:"Stop loss at market price"}],me=[{value:"BUY",label:"BUY",color:"badge-buy"},{value:"SELL",label:"SELL",color:"badge-sell"}],Ft=[{value:"CE",label:"Call (CE)",description:"Call Option"},{value:"PE",label:"Put (PE)",description:"Put Option"}],_t=[{value:"ATM",label:"ATM",description:"At The Money"},{value:"ITM1",label:"ITM1",description:"1 strike In The Money"},{value:"ITM2",label:"ITM2",description:"2 strikes In The Money"},{value:"ITM3",label:"ITM3",description:"3 strikes In The Money"},{value:"ITM4",label:"ITM4",description:"4 strikes In The Money"},{value:"ITM5",label:"ITM5",description:"5 strikes In The Money"},{value:"OTM1",label:"OTM1",description:"1 strike Out of The Money"},{value:"OTM2",label:"OTM2",description:"2 strikes Out of The Money"},{value:"OTM3",label:"OTM3",description:"3 strikes Out of The Money"},{value:"OTM4",label:"OTM4",description:"4 strikes Out of The Money"},{value:"OTM5",label:"OTM5",description:"5 strikes Out of The Money"},{value:"OTM6",label:"OTM6",description:"6 strikes Out of The Money"},{value:"OTM7",label:"OTM7",description:"7 strikes Out of The Money"},{value:"OTM8",label:"OTM8",description:"8 strikes Out of The Money"},{value:"OTM9",label:"OTM9",description:"9 strikes Out of The Money"},{value:"OTM10",label:"OTM10",description:"10 strikes Out of The Money"}],Rt=[{value:"iron_condor",label:"Iron Condor",description:"Sell OTM Call & Put, Buy further OTM Call & Put"},{value:"straddle",label:"Straddle",description:"Buy/Sell ATM Call and Put"},{value:"strangle",label:"Strangle",description:"Buy/Sell OTM Call and Put"},{value:"bull_call_spread",label:"Bull Call Spread",description:"Buy lower strike Call, Sell higher strike Call"},{value:"bear_put_spread",label:"Bear Put Spread",description:"Buy higher strike Put, Sell lower strike Put"},{value:"custom",label:"Custom",description:"Build custom multi-leg strategy"}],ge=[{value:"NIFTY",label:"NIFTY",exchange:"NFO"},{value:"BANKNIFTY",label:"BANKNIFTY",exchange:"NFO"},{value:"FINNIFTY",label:"FINNIFTY",exchange:"NFO"},{value:"MIDCPNIFTY",label:"MIDCPNIFTY",exchange:"NFO"},{value:"NIFTYNXT50",label:"NIFTYNXT50",exchange:"NFO"},{value:"SENSEX",label:"SENSEX",exchange:"BFO"},{value:"BANKEX",label:"BANKEX",exchange:"BFO"},{value:"SENSEX50",label:"SENSEX50",exchange:"BFO"}],Xe=[{value:"current_week",label:"Current Week",description:"Nearest weekly expiry"},{value:"next_week",label:"Next Week",description:"Second weekly expiry"},{value:"current_month",label:"Current Month",description:"Last expiry of current month"},{value:"next_month",label:"Next Month",description:"Last expiry of next month"}],Ut=[{value:"once",label:"Once",description:"Execute one time at specified date/time"},{value:"daily",label:"Daily",description:"Execute every day at specified time"},{value:"weekly",label:"Weekly",description:"Execute on selected days of the week"},{value:"interval",label:"Interval",description:"Execute every X minutes"}],Yt=[{value:0,label:"Mon",fullLabel:"Monday"},{value:1,label:"Tue",fullLabel:"Tuesday"},{value:2,label:"Wed",fullLabel:"Wednesday"},{value:3,label:"Thu",fullLabel:"Thursday"},{value:4,label:"Fri",fullLabel:"Friday"},{value:5,label:"Sat",fullLabel:"Saturday"},{value:6,label:"Sun",fullLabel:"Sunday"}],Wt={TRIGGERS:[{type:"start",label:"Schedule",description:"Start workflow on schedule",category:"trigger"},{type:"priceAlert",label:"Price Alert",description:"Trigger on price condition",category:"trigger"},{type:"webhookTrigger",label:"Webhook",description:"Trigger from external webhook",category:"trigger"}],ACTIONS:[{type:"tomicControl",label:"TOMIC Control",description:"Start/pause/resume/stop runtime",category:"action"},{type:"tomicSignal",label:"TOMIC Signal",description:"Enqueue signal to risk pipeline",category:"action"},{type:"placeOrder",label:"Place Order",description:"Place a trading order",category:"action"},{type:"smartOrder",label:"Smart Order",description:"Position-aware order",category:"action"},{type:"optionsOrder",label:"Options Order",description:"Trade ATM/ITM/OTM options",category:"action"},{type:"optionsMultiOrder",label:"Options Strategy",description:"Multi-leg options strategy",category:"action"},{type:"basketOrder",label:"Basket Order",description:"Place multiple orders at once",category:"action"},{type:"splitOrder",label:"Split Order",description:"Split large order into chunks",category:"action"},{type:"modifyOrder",label:"Modify Order",description:"Modify an existing order",category:"action"},{type:"cancelOrder",label:"Cancel Order",description:"Cancel a specific order",category:"action"},{type:"cancelAllOrders",label:"Cancel All",description:"Cancel all open orders",category:"action"},{type:"closePositions",label:"Close Positions",description:"Square off all positions",category:"action"}],CONDITIONS:[{type:"positionCheck",label:"Position Check",description:"Check position status",category:"condition"},{type:"fundCheck",label:"Fund Check",description:"Check available funds",category:"condition"},{type:"priceCondition",label:"Price Check",description:"Check price condition",category:"condition"},{type:"timeWindow",label:"Time Window",description:"Check market hours",category:"condition"},{type:"timeCondition",label:"Time Condition",description:"Check time condition",category:"condition"},{type:"andGate",label:"AND Gate",description:"All conditions must be true",category:"condition"},{type:"orGate",label:"OR Gate",description:"Any condition must be true",category:"condition"},{type:"notGate",label:"NOT Gate",description:"Invert condition result",category:"condition"}],DATA:[{type:"tomicSnapshot",label:"TOMIC Snapshot",description:"Read live runtime diagnostics",category:"data"},{type:"getQuote",label:"Get Quote",description:"Fetch real-time quote",category:"data"},{type:"getDepth",label:"Market Depth",description:"Fetch bid/ask depth",category:"data"},{type:"history",label:"History",description:"Fetch OHLCV data",category:"data"},{type:"openPosition",label:"Open Position",description:"Get position for symbol",category:"data"},{type:"orderBook",label:"Order Book",description:"Get all orders",category:"data"},{type:"tradeBook",label:"Trade Book",description:"Get all trades",category:"data"},{type:"positionBook",label:"Position Book",description:"Get all positions",category:"data"},{type:"holdings",label:"Holdings",description:"Get portfolio holdings",category:"data"},{type:"funds",label:"Funds",description:"Get available funds",category:"data"}],UTILITIES:[{type:"telegramAlert",label:"Telegram Alert",description:"Send Telegram notification",category:"utility"},{type:"delay",label:"Delay",description:"Wait for duration",category:"utility"},{type:"waitUntil",label:"Wait Until",description:"Wait until specific time",category:"utility"},{type:"log",label:"Log",description:"Log a message",category:"utility"},{type:"variable",label:"Variable",description:"Set/calculate variable",category:"utility"},{type:"httpRequest",label:"HTTP Request",description:"Make HTTP request",category:"utility"}]},ks={tomicControl:{action:"stop",reason:"Flow pause",outputVariable:""},tomicSignal:{instrument:"NIFTY",strategyType:"DITM_CALL",autoSelect:!1,snapshotVariable:"tomicSignals",fallbackStrategy:"IRON_CONDOR",direction:"BUY",exchange:"NSE_INDEX",product:"MIS",source:"FLOW",confidence:60,lotSize:75,entryPrice:0,stopPrice:0,instrumentVol:.25,winRate:.55,rrRatio:2,correlation:0,sectorMarginPct:0,legsJson:"",outputVariable:""},tomicSnapshot:{source:"status",runScan:!0,limit:25,outputVariable:""},start:{scheduleType:"daily",time:"09:15",marketHoursOnly:!0},priceAlert:{symbol:"",exchange:"NSE",condition:"above",price:0},webhookTrigger:{label:"",symbol:"",exchange:"NSE"},placeOrder:{symbol:"",exchange:"NSE",action:"BUY",quantity:1,priceType:"MARKET",product:"MIS"},smartOrder:{symbol:"",exchange:"NSE",action:"BUY",quantity:1,positionSize:0,priceType:"MARKET",product:"MIS"},optionsOrder:{underlying:"NIFTY",exchange:"NSE_INDEX",expiryDate:"",offset:"ATM",optionType:"CE",action:"BUY",quantity:1,priceType:"MARKET",product:"MIS"},optionsMultiOrder:{strategy:"straddle",underlying:"NIFTY",exchange:"NSE_INDEX",expiryDate:"",legs:[],priceType:"MARKET",product:"MIS"},cancelOrder:{orderId:""},cancelAllOrders:{},closePositions:{symbol:"",exchange:"NSE",product:"MIS"},modifyOrder:{orderId:"",symbol:"",exchange:"NSE",action:"BUY"},basketOrder:{orders:"",product:"MIS",priceType:"MARKET"},splitOrder:{symbol:"",exchange:"NSE",action:"BUY",quantity:100,splitSize:50,priceType:"MARKET",product:"MIS"},positionCheck:{symbol:"",exchange:"NSE",product:"MIS",operator:"gt",threshold:0},fundCheck:{operator:"gt",threshold:1e4},priceCondition:{symbol:"",exchange:"NSE",operator:"gt",threshold:0},timeWindow:{startTime:"09:15",endTime:"15:30"},timeCondition:{targetTime:"09:30",operator:">="},andGate:{},orGate:{},notGate:{},getQuote:{symbol:"",exchange:"NSE",outputVariable:""},getDepth:{symbol:"",exchange:"NSE",outputVariable:""},history:{symbol:"",exchange:"NSE",interval:"5m",startDate:"",endDate:"",outputVariable:""},openPosition:{symbol:"",exchange:"NSE",product:"MIS",outputVariable:""},orderBook:{outputVariable:""},tradeBook:{outputVariable:""},positionBook:{outputVariable:""},holdings:{outputVariable:""},funds:{outputVariable:""},telegramAlert:{message:"Workflow executed successfully"},delay:{delayValue:1,delayUnit:"seconds"},waitUntil:{targetTime:"09:30"},log:{message:"Log message here",level:"info"},variable:{variableName:"myVar",operation:"set",value:""},httpRequest:{method:"GET",url:"",headers:{},body:"",timeout:30,outputVariable:""},symbol:{symbol:"",exchange:"NSE",outputVariable:""},optionSymbol:{underlying:"NIFTY",exchange:"NSE_INDEX",expiryDate:"",offset:"ATM",optionType:"CE",outputVariable:""},expiry:{symbol:"NIFTY",exchange:"NFO",outputVariable:""},intervals:{outputVariable:""},multiQuotes:{symbols:"",exchange:"NSE",outputVariable:""},optionChain:{underlying:"NIFTY",exchange:"NSE_INDEX",expiryDate:"",strikeCount:10,outputVariable:""},syntheticFuture:{underlying:"NIFTY",exchange:"NSE_INDEX",expiryDate:"",outputVariable:""},holidays:{exchange:"NSE",outputVariable:""},timings:{exchange:"NSE",outputVariable:""},mathExpression:{expression:"",outputVariable:"result"},margin:{symbol:"",exchange:"NSE",quantity:1,price:0,product:"MIS",action:"BUY",priceType:"MARKET",outputVariable:""},group:{}},Gt={once:Ae,daily:A,weekly:ht,interval:De},qt={once:"One-time",daily:"Daily",weekly:"Weekly",interval:"Interval"},Es=u.memo(({data:a,selected:n})=>{const o=Gt[a.scheduleType]||A,p=()=>{const f=a.intervalValue||1,w=a.intervalUnit||"minutes";return`${f}${w==="seconds"?"s":w==="hours"?"h":"m"}`};return e.jsxs("div",{className:m("workflow-node node-start min-w-[120px]",n&&"selected"),children:[e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(o,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Start"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:qt[a.scheduleType]||"Schedule"})]})]}),e.jsxs("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-[10px]",children:[a.scheduleType==="interval"?e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Every:"}),e.jsx("span",{className:"mono-data font-medium",children:p()})]}):e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Time:"}),e.jsx("span",{className:"mono-data font-medium",children:a.time||"09:15"})]}),(a.scheduleType==="daily"||a.scheduleType==="weekly")&&a.days&&a.days.length>0&&a.days.length<7&&e.jsxs("div",{className:"mt-0.5 flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Days:"}),e.jsx("span",{className:"mono-data text-[9px]",children:a.days.map(f=>["M","T","W","T","F","S","S"][f]).join("")})]})]})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});Es.displayName="StartNode";const Qt={above:">",below:"<",crosses_above:"crosses >",crosses_below:"crosses <"},Ht={above:"LTP Above",below:"LTP Below",crosses_above:"Crosses Above",crosses_below:"Crosses Below"},Os=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-condition min-w-[120px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(Je,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Price Alert"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:Ht[a.condition]||"Condition"}),e.jsx("span",{className:"mono-data text-[10px] font-medium text-primary",children:a.price||0})]}),a.ltp!==void 0&&e.jsxs("div",{className:"flex items-center justify-between rounded border border-border/50 bg-surface-2 px-1.5 py-0.5",children:[e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"LTP"}),e.jsx("span",{className:"mono-data text-[10px] font-semibold",children:a.ltp.toFixed(2)})]}),e.jsxs("div",{className:"text-center text-[8px] text-muted-foreground",children:["LTP ",Qt[a.condition]||">"," ",a.price||0]})]}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"Yes"}),e.jsx("span",{className:"text-sell",children:"No"})]})]}),e.jsx(c,{type:"source",position:d.Bottom,id:"true",className:"!bottom-0 !left-1/4 !translate-y-1/2 !bg-buy",style:{left:"25%"}}),e.jsx(c,{type:"source",position:d.Bottom,id:"false",className:"!bottom-0 !left-3/4 !translate-y-1/2 !bg-sell",style:{left:"75%"}})]}));Os.displayName="PriceAlertNode";const Ms=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-trigger min-w-[120px]",n&&"selected"),children:[e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded bg-node-trigger/20",children:e.jsx(Ze,{className:"h-3 w-3 text-node-trigger"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Webhook"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"External Trigger"})]})]}),a.symbol&&e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-center mb-1",children:e.jsxs("span",{className:"text-[10px] font-mono text-primary",children:[a.symbol,a.exchange&&e.jsxs("span",{className:"text-muted-foreground",children:[":",a.exchange]})]})}),a.label&&e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-center",children:e.jsx("span",{className:"text-[10px] text-muted-foreground",children:a.label})})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Ms.displayName="WebhookTriggerNode";const Xt={GET:"text-green-500",POST:"text-blue-500",PUT:"text-orange-500",DELETE:"text-red-500",PATCH:"text-purple-500"},Is=u.memo(({data:a,selected:n})=>{const o=a.method||"GET",p=a.url||"",f=p.length>20?`${p.substring(0,20)}...`:p;return e.jsxs("div",{className:m("workflow-node min-w-[140px] border-l-primary",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded bg-primary/20",children:e.jsx(es,{className:"h-3 w-3 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"HTTP Request"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"API Call"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:m("text-[10px] font-bold",Xt[o]||"text-muted-foreground"),children:o}),f&&e.jsx("span",{className:"truncate text-[9px] text-muted-foreground",children:f})]}),a.outputVariable&&e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-0.5",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:`{{${a.outputVariable}}}`})})]})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});Is.displayName="HttpRequestNode";const Vs=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-action min-w-[120px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(ss,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Place Order"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:m("rounded px-1 py-0.5 text-[9px] font-semibold",a.action==="BUY"?"badge-buy":"badge-sell"),children:a.action||"BUY"}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:"Qty:"}),e.jsx("span",{className:"mono-data font-medium",children:a.quantity||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{children:a.priceType||"MARKET"}),e.jsx("span",{children:a.product||"MIS"})]}),a.ltp!==void 0&&e.jsxs("div",{className:"mt-0.5 flex items-center justify-between rounded border border-border/50 bg-surface-2 px-1.5 py-0.5",children:[e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"LTP"}),e.jsx("span",{className:"mono-data text-[10px] font-semibold text-primary",children:a.ltp.toFixed(2)})]})]})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Vs.displayName="PlaceOrderNode";const Ps=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-action min-w-[120px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(Fe,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Smart Order"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:m("rounded px-1 py-0.5 text-[9px] font-semibold",a.action==="BUY"?"badge-buy":"badge-sell"),children:a.action||"BUY"}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:"Qty:"}),e.jsx("span",{className:"mono-data font-medium",children:a.quantity||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Target Pos"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.positionSize??0})]}),e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{children:a.priceType||"MARKET"}),e.jsx("span",{children:a.product||"MIS"})]})]})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Ps.displayName="SmartOrderNode";const $t={current_week:"This Week",next_week:"Next Week",current_month:"This Month",next_month:"Next Month"},Ls=u.memo(({data:a,selected:n})=>{const p=a.expiryType||"current_week";return e.jsxs("div",{className:m("workflow-node node-action min-w-[130px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(ce,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Options"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.underlying||"NIFTY"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Strike"}),e.jsxs("span",{className:"mono-data text-[10px] font-medium",children:[a.offset||"ATM"," ",a.optionType||"CE"]})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Expiry"}),e.jsx("span",{className:"text-[10px] font-medium",children:$t[p]||"This Week"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:m("rounded px-1 py-0.5 text-[9px] font-semibold",a.action==="BUY"?"badge-buy":"badge-sell"),children:a.action||"BUY"}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:"Qty:"}),e.jsx("span",{className:"mono-data font-medium",children:a.quantity||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{children:a.product||"MIS"}),e.jsx("span",{children:a.priceType||"MARKET"})]}),a.ltp!==void 0&&e.jsxs("div",{className:"mt-0.5 flex items-center justify-between rounded border border-border/50 bg-surface-2 px-1.5 py-0.5",children:[e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"LTP"}),e.jsx("span",{className:"mono-data text-[10px] font-semibold text-primary",children:a.ltp.toFixed(2)})]})]})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});Ls.displayName="OptionsOrderNode";const zt={iron_condor:"Iron Condor",straddle:"Straddle",strangle:"Strangle",bull_call_spread:"Bull Call",bear_put_spread:"Bear Put",custom:"Custom"},Kt={current_week:"This Week",next_week:"Next Week",current_month:"This Month",next_month:"Next Month"},Jt=a=>{switch(a){case"straddle":case"strangle":case"bull_call_spread":case"bear_put_spread":return 2;case"iron_condor":return 4;default:return 0}},Bs=u.memo(({data:a,selected:n})=>{const o=a.legs?.length||Jt(a.strategy),p=a;return e.jsxs("div",{className:m("workflow-node node-action min-w-[130px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(se,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Multi-Leg"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.underlying||"NIFTY"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Strategy"}),e.jsx("span",{className:"text-[10px] font-medium",children:zt[a.strategy]||a.strategy})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Legs"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:o})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Expiry"}),e.jsx("span",{className:"text-[10px] font-medium",children:Kt[p.expiryType||""]||"This Week"})]}),e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{className:m("font-medium",p.action==="BUY"?"text-buy":"text-sell"),children:p.action||"SELL"}),e.jsx("span",{children:a.product||"MIS"})]})]})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});Bs.displayName="OptionsMultiOrderNode";const Ds=u.memo(({selected:a})=>e.jsxs("div",{className:m("workflow-node node-action min-w-[110px]",a&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded bg-sell/20 text-sell",children:e.jsx(de,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Cancel All"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Orders"})]})]}),e.jsx("div",{className:"rounded bg-sell/10 px-1.5 py-1 text-center",children:e.jsx("span",{className:"text-[9px] text-sell",children:"Cancels all open orders"})})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Ds.displayName="CancelAllOrdersNode";const As=u.memo(({data:a,selected:n})=>{const o=a.exchange||a.product;return e.jsxs("div",{className:m("workflow-node node-action min-w-[110px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded bg-sell/20 text-sell",children:e.jsx(as,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Close All"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Positions"})]})]}),o?e.jsxs("div",{className:"space-y-1",children:[a.exchange&&e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Exchange"}),e.jsx("span",{className:"text-[10px] font-medium",children:a.exchange})]}),a.product&&e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Product"}),e.jsx("span",{className:"text-[10px] font-medium",children:a.product})]})]}):e.jsx("div",{className:"rounded bg-sell/10 px-1.5 py-1 text-center",children:e.jsx("span",{className:"text-[9px] text-sell",children:"Squares off all positions"})})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});As.displayName="ClosePositionsNode";const Fs=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-action min-w-[120px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(de,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Cancel Order"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"By Order ID"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Order ID"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.orderId?`...${a.orderId.slice(-6)}`:"Variable"})]})})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Fs.displayName="CancelOrderNode";const _s=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-action min-w-[120px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(ts,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Modify Order"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Edit order"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Order ID"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.orderId?`...${a.orderId.slice(-6)}`:"Variable"})]}),a.newPrice&&e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{children:"New Price"}),e.jsx("span",{className:"mono-data",children:a.newPrice})]}),a.newQuantity&&e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{children:"New Qty"}),e.jsx("span",{className:"mono-data",children:a.newQuantity})]})]})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));_s.displayName="ModifyOrderNode";const Rs=u.memo(({data:a,selected:n})=>{const o=Array.isArray(a.orders)?a.orders.length:0;return e.jsxs("div",{className:m("workflow-node node-action min-w-[120px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(ls,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Basket Order"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Multi-order"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Orders"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:o})]}),e.jsx("div",{className:"text-center text-[9px] text-muted-foreground",children:a.strategy||"Batch execution"})]})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});Rs.displayName="BasketOrderNode";const Us=u.memo(({data:a,selected:n})=>{const o=a.action==="BUY"?"text-green-500":"text-red-500";return e.jsxs("div",{className:m("workflow-node node-action min-w-[120px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(rs,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Split Order"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between text-[9px]",children:[e.jsx("span",{className:m("font-medium",o),children:a.action||"BUY"}),e.jsxs("span",{className:"text-muted-foreground",children:[a.quantity||0," / ",a.splitSize||50]})]}),a.delayMs&&e.jsxs("div",{className:"text-center text-[9px] text-muted-foreground",children:[a.delayMs,"ms delay"]})]})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});Us.displayName="SplitOrderNode";const Zt={start:"START",pause:"PAUSE",resume:"RESUME",stop:"STOP"},Ys=u.memo(({data:a,selected:n})=>{const o=(a.action||"stop").toLowerCase();return e.jsxs("div",{className:m("workflow-node node-action min-w-[130px] border-l-emerald-500",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-emerald-500/20 text-emerald-500",children:e.jsx(ns,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"TOMIC Control"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Runtime action"})]})]}),e.jsxs("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:"Action:"})," ",e.jsx("span",{className:"mono-data font-semibold",children:Zt[o]||o.toUpperCase()})]})]}),e.jsx(c,{type:"source",position:d.Bottom})]})});Ys.displayName="TomicControlNode";const Ws=u.memo(({data:a,selected:n})=>{const o=(a.direction||"BUY").toUpperCase(),p=!!a.autoSelect;return e.jsxs("div",{className:m("workflow-node node-action min-w-[150px] border-l-emerald-500",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-emerald-500/20 text-emerald-500",children:e.jsx(is,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"TOMIC Signal"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Queue to risk agent"})]})]}),e.jsxs("div",{className:"space-y-0.5 text-[10px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Instrument:"}),e.jsx("span",{className:"mono-data font-medium",children:a.instrument||"NIFTY"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Strategy:"}),e.jsx("span",{className:"mono-data",children:p?"AUTO_SELL":a.strategyType||"DITM_CALL"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Direction:"}),e.jsx("span",{className:m("mono-data font-semibold",o==="BUY"?"text-green-500":"text-red-500"),children:o})]}),p&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Fallback:"}),e.jsx("span",{className:"mono-data",children:a.fallbackStrategy||"IRON_CONDOR"})]})]})]}),e.jsx(c,{type:"source",position:d.Bottom})]})});Ws.displayName="TomicSignalNode";const el={exists:"Has Position",not_exists:"No Position",quantity_above:"Qty Above",quantity_below:"Qty Below",pnl_above:"P&L Above",pnl_below:"P&L Below"},Gs=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-condition min-w-[120px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2 !h-3 !w-3 !rounded-full !border-2 !border-background !bg-muted-foreground"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(X,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Position"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Check"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Check"}),e.jsx("span",{className:"text-[10px] font-medium",children:el[a.condition]||a.condition})]}),(a.condition?.includes("above")||a.condition?.includes("below"))&&e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{children:"Threshold:"}),e.jsx("span",{className:"mono-data",children:a.threshold??0})]})]}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"True"}),e.jsx("span",{className:"text-sell",children:"False"})]})]}),e.jsx(c,{type:"source",position:d.Bottom,id:"true",className:"!bottom-0 !translate-y-1/2 !bg-buy !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"25%"}}),e.jsx(c,{type:"source",position:d.Bottom,id:"false",className:"!bottom-0 !translate-y-1/2 !bg-sell !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"75%"}})]}));Gs.displayName="PositionCheckNode";const qs=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-condition min-w-[110px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2 !h-3 !w-3 !rounded-full !border-2 !border-background !bg-muted-foreground"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(be,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Fund"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Check"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Min"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.minAvailable?.toLocaleString()||0})]}),e.jsx("div",{className:"text-center text-[9px] text-muted-foreground",children:"Checks available margin"})]}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"True"}),e.jsx("span",{className:"text-sell",children:"False"})]})]}),e.jsx(c,{type:"source",position:d.Bottom,id:"true",className:"!bottom-0 !translate-y-1/2 !bg-buy !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"25%"}}),e.jsx(c,{type:"source",position:d.Bottom,id:"false",className:"!bottom-0 !translate-y-1/2 !bg-sell !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"75%"}})]}));qs.displayName="FundCheckNode";const Qs=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-condition min-w-[120px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2 !h-3 !w-3 !rounded-full !border-2 !border-background !bg-muted-foreground"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(A,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Time"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Window"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Start"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.startTime||"09:15"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"End"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.endTime||"15:30"})]}),a.invertCondition&&e.jsx("div",{className:"text-center text-[9px] text-muted-foreground",children:"Outside window"})]}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"True"}),e.jsx("span",{className:"text-sell",children:"False"})]})]}),e.jsx(c,{type:"source",position:d.Bottom,id:"true",className:"!bottom-0 !translate-y-1/2 !bg-buy !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"25%"}}),e.jsx(c,{type:"source",position:d.Bottom,id:"false",className:"!bottom-0 !translate-y-1/2 !bg-sell !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"75%"}})]}));Qs.displayName="TimeWindowNode";const sl={"==":"=",">=":">=","<=":"<=",">":">","<":"<"},Hs=u.memo(({data:a,selected:n})=>{const o=sl[a.operator]||"=";return e.jsxs("div",{className:m("workflow-node node-condition min-w-[120px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(A,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Time"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.conditionType==="entry"?"Entry":a.conditionType==="exit"?"Exit":"Condition"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Time"}),e.jsxs("span",{className:"mono-data text-[10px] font-medium",children:[o," ",a.targetTime||"09:30"]})]}),a.label&&e.jsx("div",{className:"text-center text-[9px] text-muted-foreground truncate",children:a.label})]}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"Yes"}),e.jsx("span",{className:"text-sell",children:"No"})]})]}),e.jsx(c,{type:"source",position:d.Bottom,id:"yes",className:"!bottom-0 !left-1/4 !translate-y-1/2 !bg-buy",style:{left:"25%"}}),e.jsx(c,{type:"source",position:d.Bottom,id:"no",className:"!bottom-0 !left-3/4 !translate-y-1/2 !bg-sell",style:{left:"75%"}})]})});Hs.displayName="TimeConditionNode";const al={">":">","<":"<","==":"=",">=":">=","<=":"<=","!=":"!="},tl={ltp:"LTP",open:"Open",high:"High",low:"Low",prev_close:"Prev Close",change_percent:"Change %"},Xs=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-condition min-w-[120px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2 !h-3 !w-3 !rounded-full !border-2 !border-background !bg-muted-foreground"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(ce,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Price"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Condition"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Check"}),e.jsxs("span",{className:"text-[10px] font-medium",children:[tl[a.field]||"LTP"," ",al[a.operator]||">"," ",a.value||0]})]})]}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"True"}),e.jsx("span",{className:"text-sell",children:"False"})]})]}),e.jsx(c,{type:"source",position:d.Bottom,id:"true",className:"!bottom-0 !translate-y-1/2 !bg-buy !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"25%"}}),e.jsx(c,{type:"source",position:d.Bottom,id:"false",className:"!bottom-0 !translate-y-1/2 !bg-sell !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"75%"}})]}));Xs.displayName="PriceConditionNode";const $s=u.memo(({data:a,selected:n})=>{const o=a.inputCount||2;return e.jsxs("div",{className:m("workflow-node node-condition min-w-[100px]",n&&"selected"),children:[Array.from({length:o}).map((p,f)=>{const w=(f+1)/(o+1)*100;return e.jsx(c,{type:"target",position:d.Top,id:`input-${f}`,className:"!top-0 !-translate-y-1/2",style:{left:`${w}%`}},`input-${f}`)}),e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"mb-1.5 flex items-center justify-center gap-1.5",children:e.jsx("div",{className:"node-icon flex h-6 w-6 items-center justify-center rounded bg-node-condition/20",children:e.jsx("span",{className:"text-[10px] font-bold text-node-condition",children:"AND"})})}),e.jsx("div",{className:"rounded bg-muted/50 px-2 py-1 text-center",children:e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"All conditions must be true"})}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"True"}),e.jsx("span",{className:"text-sell",children:"False"})]})]}),e.jsx(c,{type:"source",position:d.Bottom,id:"true",className:"!bottom-0 !translate-y-1/2 !bg-buy !w-3 !h-3",style:{left:"25%"}}),e.jsx(c,{type:"source",position:d.Bottom,id:"false",className:"!bottom-0 !translate-y-1/2 !bg-sell !w-3 !h-3",style:{left:"75%"}})]})});$s.displayName="AndGateNode";const zs=u.memo(({data:a,selected:n})=>{const o=a.inputCount||2;return e.jsxs("div",{className:m("workflow-node node-condition min-w-[100px]",n&&"selected"),children:[Array.from({length:o}).map((p,f)=>{const w=(f+1)/(o+1)*100;return e.jsx(c,{type:"target",position:d.Top,id:`input-${f}`,className:"!top-0 !-translate-y-1/2",style:{left:`${w}%`}},`input-${f}`)}),e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"mb-1.5 flex items-center justify-center gap-1.5",children:e.jsx("div",{className:"node-icon flex h-6 w-6 items-center justify-center rounded bg-node-condition/20",children:e.jsx("span",{className:"text-[10px] font-bold text-node-condition",children:"OR"})})}),e.jsx("div",{className:"rounded bg-muted/50 px-2 py-1 text-center",children:e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Any condition can be true"})}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"True"}),e.jsx("span",{className:"text-sell",children:"False"})]})]}),e.jsx(c,{type:"source",position:d.Bottom,id:"true",className:"!bottom-0 !translate-y-1/2 !bg-buy !w-3 !h-3",style:{left:"25%"}}),e.jsx(c,{type:"source",position:d.Bottom,id:"false",className:"!bottom-0 !translate-y-1/2 !bg-sell !w-3 !h-3",style:{left:"75%"}})]})});zs.displayName="OrGateNode";const Ks=u.memo(({selected:a})=>e.jsxs("div",{className:m("workflow-node node-condition min-w-[100px]",a&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,id:"input",className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"mb-1.5 flex items-center justify-center gap-1.5",children:e.jsx("div",{className:"node-icon flex h-6 w-6 items-center justify-center rounded bg-node-condition/20",children:e.jsx("span",{className:"text-[10px] font-bold text-node-condition",children:"NOT"})})}),e.jsx("div",{className:"rounded bg-muted/50 px-2 py-1 text-center",children:e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Inverts condition"})}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"Yes"}),e.jsx("span",{className:"text-sell",children:"No"})]})]}),e.jsx(c,{type:"source",position:d.Bottom,id:"yes",className:"!bottom-0 !translate-y-1/2 !bg-buy",style:{left:"25%"}}),e.jsx(c,{type:"source",position:d.Bottom,id:"no",className:"!bottom-0 !translate-y-1/2 !bg-sell",style:{left:"75%"}})]}));Ks.displayName="NotGateNode";const Js=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(pe,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Get Quote"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]})}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Js.displayName="GetQuoteNode";const Zs=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(se,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Depth"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]})}),e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:"5-level bid/ask"})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Zs.displayName="GetDepthNode";const ea=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-primary",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(cs,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Order Status"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Check order"})]})]}),e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Order ID"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.orderId?`...${a.orderId.slice(-6)}`:"-"})]})})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));ea.displayName="GetOrderStatusNode";const ll={"1m":"1 Min","5m":"5 Min","15m":"15 Min","30m":"30 Min","1h":"1 Hour","1d":"Daily"},sa=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(ce,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"History"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{children:ll[a.interval]||a.interval||"1d"}),e.jsxs("span",{children:[a.days||30," days"]})]})]})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));sa.displayName="HistoryNode";const aa=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(X,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Position"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsx("div",{className:"text-center text-[9px] text-muted-foreground",children:a.product||"MIS"})]})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));aa.displayName="OpenPositionNode";const ta=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(Ae,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Expiry"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NFO"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"NIFTY"})]}),a.outputVariable&&e.jsx("div",{className:"text-center text-[9px] text-muted-foreground",children:a.outputVariable})]})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));ta.displayName="ExpiryNode";const la=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(A,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Intervals"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Time frames"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-center",children:e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Fetch available intervals"})}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));la.displayName="IntervalsNode";const ra=u.memo(({data:a,selected:n})=>{const o=(a.symbols||"").split(",").filter(p=>p.trim());return e.jsxs("div",{className:m("workflow-node node-data min-w-[130px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(pe,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Multi Quotes"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbols: "}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:o.length>0?o.length:0})]}),o.length>0&&e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("span",{className:"mono-data text-[9px] text-muted-foreground truncate block",children:[o.slice(0,3).join(", "),o.length>3&&"..."]})}),a.outputVariable&&e.jsxs("div",{className:"rounded border border-border/50 bg-surface-2 px-1.5 py-0.5",children:[e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Output: "}),e.jsx("span",{className:"mono-data text-[9px] font-medium text-primary",children:a.outputVariable})]})]})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});ra.displayName="MultiQuotesNode";const na=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-primary",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(ds,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Symbol Info"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]})}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));na.displayName="SymbolNode";const ia=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[130px] border-l-primary",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(os,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Option Symbol"}),e.jsxs("div",{className:"text-[9px] text-muted-foreground",children:[a.optionType||"CE"," ",a.offset||"ATM"]})]})]}),e.jsxs("div",{className:"space-y-0.5 rounded bg-muted/50 px-1.5 py-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Underlying"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.underlying||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Expiry"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.expiryDate||"-"})]})]}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));ia.displayName="OptionSymbolNode";const ca=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(xs,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Order Book"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"All orders"})]})]}),a.outputVariable&&e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-center",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:a.outputVariable})})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));ca.displayName="OrderBookNode";const da=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(ms,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Trade Book"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Executed trades"})]})]}),a.outputVariable&&e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-center",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:a.outputVariable})})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));da.displayName="TradeBookNode";const oa=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(X,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Position Book"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"All positions"})]})]}),a.outputVariable&&e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-center",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:a.outputVariable})})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));oa.displayName="PositionBookNode";const xa=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[130px] border-l-primary",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(_e,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Synthetic Future"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE_INDEX"})]})]}),e.jsxs("div",{className:"space-y-0.5 rounded bg-muted/50 px-1.5 py-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Underlying"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.underlying||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Expiry"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.expiryDate||"-"})]})]}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));xa.displayName="SyntheticFutureNode";const ma=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[130px] border-l-primary",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(us,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Option Chain"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE_INDEX"})]})]}),e.jsxs("div",{className:"space-y-0.5 rounded bg-muted/50 px-1.5 py-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Underlying"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.underlying||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Expiry"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.expiryDate||"-"})]}),a.strikeCount&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Strikes"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.strikeCount})]})]}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));ma.displayName="OptionChainNode";const ua=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-purple-400",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-purple-400/20 text-purple-400",children:e.jsx(ps,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Holidays"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Market holidays"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Year"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.year||new Date().getFullYear()})]})}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));ua.displayName="HolidaysNode";const pa=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-purple-400",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-purple-400/20 text-purple-400",children:e.jsx(A,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Timings"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Market hours"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Date"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.date||"Today"})]})}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));pa.displayName="TimingsNode";const ha=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-green-500",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-green-500/20 text-green-500",children:e.jsx(hs,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Subscribe LTP"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Real-time"})]})]}),a.symbol&&e.jsxs("div",{className:"mt-1 space-y-0.5 text-[10px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Symbol:"}),e.jsx("span",{className:"mono-data font-medium",children:a.symbol})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Exchange:"}),e.jsx("span",{className:"mono-data",children:a.exchange||"NSE"})]}),a.outputVariable&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Output:"}),e.jsx("span",{className:"mono-data text-green-500",children:`{{${a.outputVariable}}}`})]})]})]}),e.jsx(c,{type:"source",position:d.Bottom})]}));ha.displayName="SubscribeLTPNode";const ja=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-green-500",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-green-500/20 text-green-500",children:e.jsx(js,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Subscribe Quote"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Real-time OHLC"})]})]}),a.symbol&&e.jsxs("div",{className:"mt-1 space-y-0.5 text-[10px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Symbol:"}),e.jsx("span",{className:"mono-data font-medium",children:a.symbol})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Exchange:"}),e.jsx("span",{className:"mono-data",children:a.exchange||"NSE"})]}),a.outputVariable&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Output:"}),e.jsx("span",{className:"mono-data text-green-500",children:`{{${a.outputVariable}}}`})]})]})]}),e.jsx(c,{type:"source",position:d.Bottom})]}));ja.displayName="SubscribeQuoteNode";const Na=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-green-500",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-green-500/20 text-green-500",children:e.jsx(se,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Subscribe Depth"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Order Book"})]})]}),a.symbol&&e.jsxs("div",{className:"mt-1 space-y-0.5 text-[10px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Symbol:"}),e.jsx("span",{className:"mono-data font-medium",children:a.symbol})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Exchange:"}),e.jsx("span",{className:"mono-data",children:a.exchange||"NSE"})]}),a.outputVariable&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Output:"}),e.jsx("span",{className:"mono-data text-green-500",children:`{{${a.outputVariable}}}`})]})]})]}),e.jsx(c,{type:"source",position:d.Bottom})]}));Na.displayName="SubscribeDepthNode";const ga=u.memo(({data:a,selected:n})=>{const o={ltp:"LTP",quote:"Quote",depth:"Depth",all:"All Streams"};return e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-red-500",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-red-500/20 text-red-500",children:e.jsx(Ns,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Unsubscribe"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Stop Stream"})]})]}),e.jsxs("div",{className:"mt-1 space-y-0.5 text-[10px]",children:[a.symbol&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Symbol:"}),e.jsx("span",{className:"mono-data font-medium",children:a.symbol})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx("span",{className:"mono-data text-red-500",children:o[a.streamType||"all"]})]})]})]}),e.jsx(c,{type:"source",position:d.Bottom})]})});ga.displayName="UnsubscribeNode";const ba=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-amber-500",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-amber-500/20 text-amber-500",children:e.jsx(X,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Holdings"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Portfolio"})]})]}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-[10px]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Output:"}),e.jsx("span",{className:"mono-data text-amber-500",children:`{{${a.outputVariable}}}`})]})})]}),e.jsx(c,{type:"source",position:d.Bottom})]}));ba.displayName="HoldingsNode";const ya=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-amber-500",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-amber-500/20 text-amber-500",children:e.jsx(be,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Funds"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Account Balance"})]})]}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-[10px]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Output:"}),e.jsx("span",{className:"mono-data text-amber-500",children:`{{${a.outputVariable}}}`})]})})]}),e.jsx(c,{type:"source",position:d.Bottom})]}));ya.displayName="FundsNode";const va=u.memo(({data:a,selected:n})=>{const o=a.positions?.length||0;return e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-amber-500",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-amber-500/20 text-amber-500",children:e.jsx(_e,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Margin Calc"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Risk Check"})]})]}),e.jsxs("div",{className:"mt-1 space-y-0.5 text-[10px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Positions:"}),e.jsx("span",{className:"mono-data font-medium",children:o})]}),a.outputVariable&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Output:"}),e.jsx("span",{className:"mono-data text-amber-500",children:`{{${a.outputVariable}}}`})]})]})]}),e.jsx(c,{type:"source",position:d.Bottom})]})});va.displayName="MarginNode";const fa=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[145px] border-l-emerald-500",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-emerald-500/20 text-emerald-500",children:e.jsx(gs,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"TOMIC Snapshot"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Runtime diagnostics"})]})]}),e.jsxs("div",{className:"space-y-0.5 text-[10px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Source:"}),e.jsx("span",{className:"mono-data font-medium",children:a.source||"status"})]}),a.source==="signals"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Run scan:"}),e.jsx("span",{className:"mono-data",children:a.runScan?"yes":"no"})]})]})]}),e.jsx(c,{type:"source",position:d.Bottom})]}));fa.displayName="TomicSnapshotNode";const wa=u.memo(({data:a,selected:n})=>{const o=a,p=a.message?a.message.length>25?`${a.message.substring(0,25)}...`:a.message:"No message";return e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-muted-foreground",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-[#0088cc]/20 text-[#0088cc]",children:e.jsx(bs,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Telegram"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:o.username||"No user"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsx("span",{className:"text-[9px] text-muted-foreground line-clamp-2",children:p})})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});wa.displayName="TelegramAlertNode";function rl(a){if(a.delayValue!==void 0){const o=a.delayValue,p=a.delayUnit||"seconds";return`${o}${{seconds:"s",minutes:"m",hours:"h"}[p]||"s"}`}const n=a.delayMs||1e3;if(n>=6e4){const o=Math.floor(n/6e4),p=Math.floor(n%6e4/1e3);return p>0?`${o}m ${p}s`:`${o}m`}return n>=1e3?`${n/1e3}s`:`${n}ms`}const Ca=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[100px] border-l-muted-foreground",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-muted text-muted-foreground",children:e.jsx(De,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Wait Duration"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Delay"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-center",children:e.jsx("span",{className:"mono-data text-sm font-semibold text-primary",children:rl(a)})})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Ca.displayName="DelayNode";const Sa=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-utility min-w-[120px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded bg-amber-500/10",children:e.jsx(ys,{className:"h-3 w-3 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Wait Until"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Pause execution"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Time"}),e.jsx("span",{className:"mono-data text-[10px] font-medium text-amber-500",children:a.targetTime||"09:30"})]}),a.label&&e.jsx("div",{className:"text-center text-[9px] text-muted-foreground truncate",children:a.label})]})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Sa.displayName="WaitUntilNode";const $e={blue:"border-blue-500/30 bg-blue-500/5",green:"border-buy/30 bg-buy/5",red:"border-sell/30 bg-sell/5",purple:"border-purple-500/30 bg-purple-500/5",orange:"border-orange-500/30 bg-orange-500/5",default:"border-border/50 bg-muted/20"},Ta=u.memo(({data:a,selected:n})=>{const o=$e[a.color||"default"]||$e.default;return e.jsxs("div",{className:m("min-h-[150px] min-w-[200px] rounded-lg border-2 border-dashed",o,n&&"ring-2 ring-primary ring-offset-2 ring-offset-background"),children:[e.jsx(Ua,{minWidth:200,minHeight:150,isVisible:n,lineClassName:"!border-primary",handleClassName:"!h-2 !w-2 !rounded-full !border-2 !border-primary !bg-background"}),e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"absolute -top-3 left-3 flex items-center gap-1.5 rounded bg-background px-2 py-0.5",children:[e.jsx(se,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium",children:a.label||"Group"})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});Ta.displayName="GroupNode";const nl={set:"=",get:"GET",add:"+",subtract:"-",multiply:"*",divide:"/",parse_json:"JSON",stringify:"STR",increment:"++",decrement:"--",append:"+="},il={set:"Set Value",get:"Get Value",add:"Add",subtract:"Subtract",multiply:"Multiply",divide:"Divide",parse_json:"Parse JSON",stringify:"To String",increment:"Increment",decrement:"Decrement",append:"Append"},ka=u.memo(({data:a,selected:n})=>{const o=typeof a.value=="object"?`${JSON.stringify(a.value).slice(0,20)}...`:String(a.value||"").slice(0,20);return e.jsxs("div",{className:m("workflow-node node-utility min-w-[120px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(vs,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Variable"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:il[a.operation]||"Set"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Name"}),e.jsx("span",{className:"mono-data text-[10px] font-medium text-primary",children:a.variableName||"var"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:nl[a.operation]||"="}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:o||"-"})]})]}),e.jsxs("div",{className:"mt-1.5 text-center text-[8px] text-muted-foreground",children:["Use: ",`{{${a.variableName||"var"}}}`]})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});ka.displayName="VariableNode";const Ea=u.memo(({data:a,selected:n})=>{const o=a.expression||"",p=a.outputVariable||"result",f=o.length>25?`${o.substring(0,22)}...`:o;return e.jsxs("div",{className:m("workflow-node min-w-[140px] border-purple-500/50 bg-purple-500/5",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!bg-purple-500"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon bg-purple-500/20",children:e.jsx(fs,{className:"h-3 w-3 text-purple-500"})}),e.jsx("span",{className:"node-title",children:"Math"})]}),o?e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"rounded bg-muted/50 px-2 py-1",children:e.jsx("code",{className:"text-[10px] text-purple-400 font-mono",children:f})}),e.jsxs("div",{className:"text-[9px] text-muted-foreground text-center",children:[p," = ..."]})]}):e.jsx("div",{className:"rounded bg-muted/50 px-2 py-1 text-center",children:e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Configure expression"})})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bg-purple-500"})]})});Ea.displayName="MathExpressionNode";const cl={info:"text-blue-400",warn:"text-yellow-400",error:"text-red-400"},dl={info:"INFO",warn:"WARN",error:"ERROR"},Oa=u.memo(({data:a,selected:n})=>{const o=(a.message||"Log message").slice(0,30),p=(a.message||"").length>30;return e.jsxs("div",{className:m("workflow-node node-utility min-w-[110px]",n&&"selected"),children:[e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(ws,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Log"}),e.jsx("div",{className:m("text-[9px]",cl[a.level]||"text-muted-foreground"),children:dl[a.level]||"INFO"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[o,p&&"..."]})})]}),e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});Oa.displayName="LogNode";const ol={trigger:{border:"border-l-node-trigger",iconBg:"bg-node-trigger/20 text-node-trigger"},action:{border:"border-l-node-action",iconBg:"bg-node-action/20 text-node-action"},condition:{border:"border-l-node-condition",iconBg:"bg-node-condition/20 text-node-condition"},data:{border:"border-l-[hsl(var(--primary))]",iconBg:"bg-primary/20 text-primary"},utility:{border:"border-l-muted-foreground",iconBg:"bg-muted text-muted-foreground"}};u.memo(function({category:n,selected:o,icon:p,title:f,subtitle:w,hasInput:T=!1,hasOutput:y=!0,hasConditionalOutputs:k=!1,children:B,className:E,minWidth:$=120}){const F=ol[n];return e.jsxs("div",{className:m("workflow-node rounded-lg border border-border bg-card","border-l-2",F.border,o&&"ring-2 ring-primary ring-offset-2 ring-offset-background",E),style:{minWidth:$},children:[T&&e.jsx(c,{type:"target",position:d.Top,className:"!top-0 !h-3 !w-3 !-translate-y-1/2 !rounded-full !border-2 !border-background !bg-muted-foreground"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:m("flex h-5 w-5 items-center justify-center rounded",F.iconBg),children:p}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"truncate text-xs font-medium leading-tight",children:f}),w&&e.jsx("div",{className:"truncate text-[9px] text-muted-foreground",children:w})]})]}),B&&e.jsx("div",{className:"space-y-1",children:B})]}),k?e.jsxs(e.Fragment,{children:[e.jsx(c,{type:"source",position:d.Bottom,id:"true",className:"!bottom-0 !left-1/4 !h-3 !w-3 !translate-y-1/2 !rounded-full !border-2 !border-background !bg-buy"}),e.jsx(c,{type:"source",position:d.Bottom,id:"false",className:"!bottom-0 !left-3/4 !h-3 !w-3 !translate-y-1/2 !rounded-full !border-2 !border-background !bg-sell"})]}):y?e.jsx(c,{type:"source",position:d.Bottom,className:"!bottom-0 !h-3 !w-3 !translate-y-1/2 !rounded-full !border-2 !border-background !bg-muted-foreground"}):null]})});const xl={start:Es,priceAlert:Os,webhookTrigger:Ms,httpRequest:Is,placeOrder:Vs,smartOrder:Ps,optionsOrder:Ls,optionsMultiOrder:Bs,cancelAllOrders:Ds,closePositions:As,cancelOrder:Fs,modifyOrder:_s,basketOrder:Rs,splitOrder:Us,tomicControl:Ys,tomicSignal:Ws,positionCheck:Gs,fundCheck:qs,timeWindow:Qs,timeCondition:Hs,priceCondition:Xs,andGate:$s,orGate:zs,notGate:Ks,getQuote:Js,getDepth:Zs,getOrderStatus:ea,history:sa,openPosition:aa,expiry:ta,intervals:la,multiQuotes:ra,symbol:na,optionSymbol:ia,orderBook:ca,tradeBook:da,positionBook:oa,syntheticFuture:xa,optionChain:ma,subscribeLtp:ha,subscribeQuote:ja,subscribeDepth:Na,unsubscribe:ga,holdings:ba,funds:ya,margin:va,tomicSnapshot:fa,telegramAlert:wa,delay:Ca,waitUntil:Sa,group:Ta,variable:ka,mathExpression:Ea,log:Oa,holidays:ua,timings:pa},ml={Actions:[{type:"placeOrder",label:"Place Order"},{type:"smartOrder",label:"Smart Order"},{type:"optionsOrder",label:"Options Order"},{type:"optionsMultiOrder",label:"Multi-Leg Options"},{type:"closePositions",label:"Close Positions"},{type:"cancelAllOrders",label:"Cancel All"}],Logic:[{type:"timeCondition",label:"Time Condition"},{type:"positionCheck",label:"Position Check"},{type:"fundCheck",label:"Fund Check"},{type:"priceCondition",label:"Price Check"},{type:"timeWindow",label:"Time Window"}],Data:[{type:"getQuote",label:"Get Quote"},{type:"getDepth",label:"Get Depth"},{type:"openPosition",label:"Open Position"}],Utility:[{type:"waitUntil",label:"Wait Until"},{type:"delay",label:"Delay"},{type:"telegramAlert",label:"Telegram Alert"},{type:"log",label:"Log"},{type:"variable",label:"Variable"}]};let ul=1e3;function pl({id:a,source:n,target:o,sourceX:p,sourceY:f,targetX:w,targetY:T,sourcePosition:y,targetPosition:k,sourceHandleId:B,targetHandleId:E,markerEnd:$,selected:F,animated:l}){const[z,K]=u.useState(!1),[P,_]=u.useState(!1),{setNodes:t,setEdges:h,getNodes:J,getEdges:s}=Ke(),[S,I,U]=Ya({sourceX:p,sourceY:f,sourcePosition:y,targetX:w,targetY:T,targetPosition:k}),ye=u.useCallback(Y=>{const Z=J(),W=s(),ae=`node_${Date.now()}_${ul++}`,D=Z.find(V=>V.id===n),oe=Z.find(V=>V.id===o);if(!D||!oe)return;const ve=(D.position.x+oe.position.x)/2,he=(D.position.y+oe.position.y)/2+50,fe=ks[Y]||{},we={id:ae,type:Y,position:{x:ve,y:he},data:{...fe}},Ce=W.filter(V=>V.id!==a),Se={id:`edge-${Date.now()}-1`,source:n,target:ae,sourceHandle:B||void 0,type:"insertable",animated:!0},Te={id:`edge-${Date.now()}-2`,source:ae,target:o,targetHandle:E||void 0,type:"insertable",animated:!0};t([...Z,we]),h([...Ce,Se,Te]),_(!1)},[n,o,B,E,a,J,s,t,h]);return e.jsxs(e.Fragment,{children:[e.jsx("path",{d:S,fill:"none",strokeWidth:z||F?3:2,stroke:z||F?"#3b82f6":"#888888",strokeDasharray:l?"5 5":void 0,style:{animation:l?"dashdraw 0.5s linear infinite":void 0},className:"react-flow__edge-path",markerEnd:$}),e.jsx(Wa,{children:e.jsx("div",{className:"nodrag nopan pointer-events-auto absolute",style:{transform:`translate(-50%, -50%) translate(${I}px, ${U}px)`},onMouseEnter:()=>K(!0),onMouseLeave:()=>!P&&K(!1),children:e.jsxs(Ve,{open:P,onOpenChange:_,children:[e.jsx(Pe,{asChild:!0,children:e.jsx("button",{type:"button",className:m("flex h-5 w-5 items-center justify-center rounded-full border bg-background shadow-sm transition-all","hover:scale-110 hover:border-primary hover:bg-primary hover:text-primary-foreground",z||P?"opacity-100 scale-100":"opacity-0 scale-75",F&&"opacity-100 scale-100"),children:e.jsx(jt,{className:"h-3 w-3"})})}),e.jsx(Le,{align:"center",className:"w-48",children:Object.entries(ml).map(([Y,Z])=>e.jsxs(Ka,{children:[e.jsx(Ja,{children:e.jsx("span",{children:Y})}),e.jsx(Za,{children:Z.map(W=>e.jsx(Q,{onClick:()=>ye(W.type),children:W.label},W.type))})]},Y))})]})})})]})}const hl={insertable:pl};function ne({type:a,label:n,description:o,icon:p,color:f,onDragStart:w}){return e.jsx("div",{draggable:!0,onDragStart:T=>w(T,a),className:m("group cursor-grab rounded-lg border border-border bg-card p-2.5 transition-all duration-200","hover:border-primary/50 hover:shadow-md active:cursor-grabbing"),children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:m("flex h-7 w-7 items-center justify-center rounded-md",f),children:p}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"truncate text-xs font-medium",children:n}),e.jsx("div",{className:"truncate text-[10px] text-muted-foreground",children:o})]})]})})}function jl({onDragStart:a}){const n=[{type:"start",label:"Schedule",description:"Start on schedule",icon:e.jsx(A,{className:"h-3.5 w-3.5 text-orange-500"}),color:"bg-orange-500/10"},{type:"priceAlert",label:"Price Alert",description:"Trigger on price",icon:e.jsx(Je,{className:"h-3.5 w-3.5 text-orange-500"}),color:"bg-orange-500/10"},{type:"webhookTrigger",label:"Webhook",description:"External trigger",icon:e.jsx(Ze,{className:"h-3.5 w-3.5 text-orange-500"}),color:"bg-orange-500/10"}],o=[{type:"tomicControl",label:"TOMIC Control",description:"Runtime start/stop",icon:e.jsx(ns,{className:"h-3.5 w-3.5 text-emerald-500"}),color:"bg-emerald-500/10"},{type:"tomicSignal",label:"TOMIC Signal",description:"Queue to risk",icon:e.jsx(is,{className:"h-3.5 w-3.5 text-emerald-500"}),color:"bg-emerald-500/10"},{type:"placeOrder",label:"Place Order",description:"Basic order",icon:e.jsx(ss,{className:"h-3.5 w-3.5 text-blue-500"}),color:"bg-blue-500/10"},{type:"smartOrder",label:"Smart Order",description:"Position-aware",icon:e.jsx(Fe,{className:"h-3.5 w-3.5 text-blue-500"}),color:"bg-blue-500/10"},{type:"optionsOrder",label:"Options Order",description:"ATM/ITM/OTM",icon:e.jsx(ce,{className:"h-3.5 w-3.5 text-blue-500"}),color:"bg-blue-500/10"},{type:"optionsMultiOrder",label:"Multi-Leg",description:"Options strategies",icon:e.jsx(se,{className:"h-3.5 w-3.5 text-blue-500"}),color:"bg-blue-500/10"},{type:"basketOrder",label:"Basket Order",description:"Multiple orders",icon:e.jsx(ls,{className:"h-3.5 w-3.5 text-blue-500"}),color:"bg-blue-500/10"},{type:"splitOrder",label:"Split Order",description:"Large order split",icon:e.jsx(rs,{className:"h-3.5 w-3.5 text-blue-500"}),color:"bg-blue-500/10"},{type:"modifyOrder",label:"Modify Order",description:"Edit order",icon:e.jsx(ts,{className:"h-3.5 w-3.5 text-blue-500"}),color:"bg-blue-500/10"},{type:"cancelOrder",label:"Cancel Order",description:"Cancel by ID",icon:e.jsx(de,{className:"h-3.5 w-3.5 text-red-500"}),color:"bg-red-500/10"},{type:"cancelAllOrders",label:"Cancel All",description:"Cancel orders",icon:e.jsx(de,{className:"h-3.5 w-3.5 text-red-500"}),color:"bg-red-500/10"},{type:"closePositions",label:"Close Positions",description:"Square off all",icon:e.jsx(as,{className:"h-3.5 w-3.5 text-red-500"}),color:"bg-red-500/10"}],p=[{type:"timeCondition",label:"Time Condition",description:"Entry/Exit time",icon:e.jsx(A,{className:"h-3.5 w-3.5 text-purple-500"}),color:"bg-purple-500/10"},{type:"positionCheck",label:"Position Check",description:"Check position",icon:e.jsx(X,{className:"h-3.5 w-3.5 text-purple-500"}),color:"bg-purple-500/10"},{type:"fundCheck",label:"Fund Check",description:"Check funds",icon:e.jsx(be,{className:"h-3.5 w-3.5 text-purple-500"}),color:"bg-purple-500/10"},{type:"priceCondition",label:"Price Check",description:"Check price",icon:e.jsx(ce,{className:"h-3.5 w-3.5 text-purple-500"}),color:"bg-purple-500/10"},{type:"timeWindow",label:"Time Window",description:"Market hours",icon:e.jsx(A,{className:"h-3.5 w-3.5 text-purple-500"}),color:"bg-purple-500/10"},{type:"andGate",label:"AND Gate",description:"All must be true",icon:e.jsx("span",{className:"text-[9px] font-bold text-purple-500",children:"AND"}),color:"bg-purple-500/10"},{type:"orGate",label:"OR Gate",description:"Any can be true",icon:e.jsx("span",{className:"text-[9px] font-bold text-purple-500",children:"OR"}),color:"bg-purple-500/10"},{type:"notGate",label:"NOT Gate",description:"Invert condition",icon:e.jsx("span",{className:"text-[9px] font-bold text-purple-500",children:"NOT"}),color:"bg-purple-500/10"}],f=[{type:"tomicSnapshot",label:"TOMIC Snapshot",description:"Runtime diagnostics",icon:e.jsx(gs,{className:"h-3.5 w-3.5 text-emerald-500"}),color:"bg-emerald-500/10"},{type:"getQuote",label:"Get Quote",description:"Real-time quote",icon:e.jsx(pe,{className:"h-3.5 w-3.5 text-cyan-500"}),color:"bg-cyan-500/10"},{type:"getDepth",label:"Get Depth",description:"Bid/ask depth",icon:e.jsx(se,{className:"h-3.5 w-3.5 text-cyan-500"}),color:"bg-cyan-500/10"},{type:"getOrderStatus",label:"Order Status",description:"Check order",icon:e.jsx(cs,{className:"h-3.5 w-3.5 text-orange-500"}),color:"bg-orange-500/10"},{type:"history",label:"History",description:"OHLCV data",icon:e.jsx(ce,{className:"h-3.5 w-3.5 text-cyan-500"}),color:"bg-cyan-500/10"},{type:"openPosition",label:"Open Position",description:"Get position",icon:e.jsx(X,{className:"h-3.5 w-3.5 text-violet-500"}),color:"bg-violet-500/10"},{type:"expiry",label:"Expiry Dates",description:"F&O expiry",icon:e.jsx(Ae,{className:"h-3.5 w-3.5 text-pink-500"}),color:"bg-pink-500/10"},{type:"multiQuotes",label:"Multi Quotes",description:"Multiple symbols",icon:e.jsx(pe,{className:"h-3.5 w-3.5 text-cyan-500"}),color:"bg-cyan-500/10"},{type:"symbol",label:"Symbol Info",description:"Get symbol details",icon:e.jsx(ds,{className:"h-3.5 w-3.5 text-teal-500"}),color:"bg-teal-500/10"},{type:"optionSymbol",label:"Option Symbol",description:"Resolve options",icon:e.jsx(os,{className:"h-3.5 w-3.5 text-pink-500"}),color:"bg-pink-500/10"},{type:"orderBook",label:"Order Book",description:"All orders",icon:e.jsx(xs,{className:"h-3.5 w-3.5 text-orange-500"}),color:"bg-orange-500/10"},{type:"tradeBook",label:"Trade Book",description:"Executed trades",icon:e.jsx(ms,{className:"h-3.5 w-3.5 text-orange-500"}),color:"bg-orange-500/10"},{type:"positionBook",label:"Position Book",description:"All positions",icon:e.jsx(X,{className:"h-3.5 w-3.5 text-violet-500"}),color:"bg-violet-500/10"},{type:"syntheticFuture",label:"Synthetic Future",description:"Calc future price",icon:e.jsx(_e,{className:"h-3.5 w-3.5 text-pink-500"}),color:"bg-pink-500/10"},{type:"optionChain",label:"Option Chain",description:"Full chain data",icon:e.jsx(us,{className:"h-3.5 w-3.5 text-pink-500"}),color:"bg-pink-500/10"},{type:"holdings",label:"Holdings",description:"Portfolio holdings",icon:e.jsx(X,{className:"h-3.5 w-3.5 text-amber-500"}),color:"bg-amber-500/10"},{type:"funds",label:"Funds",description:"Account balance",icon:e.jsx(be,{className:"h-3.5 w-3.5 text-amber-500"}),color:"bg-amber-500/10"},{type:"margin",label:"Margin Calc",description:"Margin required",icon:e.jsx(Nt,{className:"h-3.5 w-3.5 text-amber-500"}),color:"bg-amber-500/10"}],w=[{type:"subscribeLtp",label:"Subscribe LTP",description:"Live price stream",icon:e.jsx(hs,{className:"h-3.5 w-3.5 text-green-500"}),color:"bg-green-500/10"},{type:"subscribeQuote",label:"Subscribe Quote",description:"Live OHLC stream",icon:e.jsx(js,{className:"h-3.5 w-3.5 text-green-500"}),color:"bg-green-500/10"},{type:"subscribeDepth",label:"Subscribe Depth",description:"Live order book",icon:e.jsx(se,{className:"h-3.5 w-3.5 text-green-500"}),color:"bg-green-500/10"},{type:"unsubscribe",label:"Unsubscribe",description:"Stop streaming",icon:e.jsx(Ns,{className:"h-3.5 w-3.5 text-red-500"}),color:"bg-red-500/10"}],T=[{type:"variable",label:"Variable",description:"Store values",icon:e.jsx(vs,{className:"h-3.5 w-3.5 text-purple-400"}),color:"bg-purple-400/10"},{type:"mathExpression",label:"Math",description:"Calculate expression",icon:e.jsx(fs,{className:"h-3.5 w-3.5 text-purple-500"}),color:"bg-purple-500/10"},{type:"log",label:"Log",description:"Debug message",icon:e.jsx(ws,{className:"h-3.5 w-3.5 text-blue-400"}),color:"bg-blue-400/10"},{type:"telegramAlert",label:"Telegram",description:"Send alert",icon:e.jsx(bs,{className:"h-3.5 w-3.5 text-[#0088cc]"}),color:"bg-[#0088cc]/10"},{type:"delay",label:"Delay",description:"Wait duration",icon:e.jsx(De,{className:"h-3.5 w-3.5 text-muted-foreground"}),color:"bg-muted"},{type:"waitUntil",label:"Wait Until",description:"Wait until time",icon:e.jsx(ys,{className:"h-3.5 w-3.5 text-amber-500"}),color:"bg-amber-500/10"},{type:"group",label:"Group",description:"Group nodes",icon:e.jsx(gt,{className:"h-3.5 w-3.5 text-muted-foreground"}),color:"bg-muted"},{type:"httpRequest",label:"HTTP Request",description:"API call",icon:e.jsx(es,{className:"h-3.5 w-3.5 text-primary"}),color:"bg-primary/10"},{type:"holidays",label:"Holidays",description:"Market holidays",icon:e.jsx(ps,{className:"h-3.5 w-3.5 text-purple-400"}),color:"bg-purple-400/10"},{type:"timings",label:"Timings",description:"Market hours",icon:e.jsx(A,{className:"h-3.5 w-3.5 text-purple-400"}),color:"bg-purple-400/10"}];return e.jsxs("div",{className:"flex h-full flex-col border-r border-border bg-card",children:[e.jsxs("div",{className:"shrink-0 border-b border-border p-3",children:[e.jsx("h2",{className:"text-sm font-semibold",children:"Nodes"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Drag nodes to the canvas"})]}),e.jsxs(Bt,{defaultValue:"triggers",className:"flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"shrink-0 border-b border-border px-1 py-1.5",children:e.jsxs(Dt,{className:"h-7 w-full",children:[e.jsx(le,{value:"triggers",className:"flex-1 text-[8px] px-0.5",children:"Trigger"}),e.jsx(le,{value:"actions",className:"flex-1 text-[8px] px-0.5",children:"Action"}),e.jsx(le,{value:"data",className:"flex-1 text-[8px] px-0.5",children:"Data"}),e.jsx(le,{value:"stream",className:"flex-1 text-[8px] px-0.5",children:"Stream"}),e.jsx(le,{value:"conditions",className:"flex-1 text-[8px] px-0.5",children:"Logic"}),e.jsx(le,{value:"utilities",className:"flex-1 text-[8px] px-0.5",children:"Util"})]})}),e.jsxs("div",{className:"flex-1 min-h-0 relative",children:[e.jsx(re,{value:"triggers",className:"m-0 absolute inset-0",children:e.jsx(H,{className:"h-full",children:e.jsx("div",{className:"space-y-1.5 p-2",children:n.map(y=>e.jsx(ne,{...y,onDragStart:a},y.type))})})}),e.jsx(re,{value:"actions",className:"m-0 absolute inset-0",children:e.jsx(H,{className:"h-full",children:e.jsx("div",{className:"space-y-1.5 p-2",children:o.map(y=>e.jsx(ne,{...y,onDragStart:a},y.type))})})}),e.jsx(re,{value:"data",className:"m-0 absolute inset-0",children:e.jsx(H,{className:"h-full",children:e.jsx("div",{className:"space-y-1.5 p-2",children:f.map(y=>e.jsx(ne,{...y,onDragStart:a},y.type))})})}),e.jsx(re,{value:"stream",className:"m-0 absolute inset-0",children:e.jsx(H,{className:"h-full",children:e.jsx("div",{className:"space-y-1.5 p-2",children:w.map(y=>e.jsx(ne,{...y,onDragStart:a},y.type))})})}),e.jsx(re,{value:"conditions",className:"m-0 absolute inset-0",children:e.jsx(H,{className:"h-full",children:e.jsx("div",{className:"space-y-1.5 p-2",children:p.map(y=>e.jsx(ne,{...y,onDragStart:a},y.type))})})}),e.jsx(re,{value:"utilities",className:"m-0 absolute inset-0",children:e.jsx(H,{className:"h-full",children:e.jsx("div",{className:"space-y-1.5 p-2",children:T.map(y=>e.jsx(ne,{...y,onDragStart:a},y.type))})})})]})]})]})}const Nl=[{value:"above",label:"Greater Than"},{value:"below",label:"Less Than"},{value:"crosses_above",label:"Crosses Above"},{value:"crosses_below",label:"Crosses Below"}],gl=[{value:"once",label:"Only Once"},{value:"every_time",label:"Every Time"}],bl=[{value:"none",label:"No Expiration"},{value:"1h",label:"1 Hour"},{value:"4h",label:"4 Hours"},{value:"1d",label:"1 Day"},{value:"1w",label:"1 Week"}],yl=[{value:"set",label:"Set Value",description:"Set variable to a value"},{value:"get",label:"Get Value",description:"Copy from another variable"},{value:"add",label:"Add",description:"Add to variable"},{value:"subtract",label:"Subtract",description:"Subtract from variable"},{value:"multiply",label:"Multiply",description:"Multiply variable"},{value:"divide",label:"Divide",description:"Divide variable"},{value:"increment",label:"Increment",description:"Add 1 to variable"},{value:"decrement",label:"Decrement",description:"Subtract 1 from variable"},{value:"parse_json",label:"Parse JSON",description:"Parse JSON string to object"},{value:"stringify",label:"Stringify",description:"Convert to JSON string"},{value:"append",label:"Append",description:"Append to string"}],vl=[{value:"info",label:"Info",color:"text-blue-400"},{value:"warn",label:"Warning",color:"text-yellow-400"},{value:"error",label:"Error",color:"text-red-400"}],fl=[{value:"==",label:"Equals (=)",description:"Exactly at this time"},{value:">=",label:"At or After (>=)",description:"Time has passed"},{value:"<=",label:"At or Before (<=)",description:"Before this time"},{value:">",label:"After (>)",description:"Strictly after"},{value:"<",label:"Before (<)",description:"Strictly before"}],wl=[{value:"entry",label:"Entry"},{value:"exit",label:"Exit"},{value:"custom",label:"Custom"}],Cl=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DEL"},{value:"PATCH",label:"PATCH"}],ze={start:"Schedule Trigger",priceAlert:"Price Alert",webhookTrigger:"Webhook Trigger",placeOrder:"Place Order",smartOrder:"Smart Order",optionsOrder:"Options Order",optionsMultiOrder:"Multi-Leg Options",basketOrder:"Basket Order",splitOrder:"Split Order",cancelOrder:"Cancel Order",cancelAllOrders:"Cancel All Orders",closePositions:"Close Positions",modifyOrder:"Modify Order",getQuote:"Get Quote",getDepth:"Get Depth",getOrderStatus:"Order Status",openPosition:"Open Position",history:"History Data",expiry:"Get Expiry",multiQuotes:"Multi Quotes",symbol:"Symbol Info",optionSymbol:"Option Symbol",orderBook:"Order Book",tradeBook:"Trade Book",positionBook:"Position Book",syntheticFuture:"Synthetic Future",optionChain:"Option Chain",holidays:"Holidays",timings:"Market Timings",holdings:"Holdings",funds:"Funds",margin:"Margin Calculator",delay:"Delay",waitUntil:"Wait Until",log:"Log",telegramAlert:"Telegram Alert",variable:"Variable",mathExpression:"Math Expression",httpRequest:"HTTP Request",tomicControl:"TOMIC Control",tomicSignal:"TOMIC Signal",tomicSnapshot:"TOMIC Snapshot",timeWindow:"Time Window",timeCondition:"Time Condition",priceCondition:"Price Condition",positionCheck:"Position Check",fundCheck:"Fund Check",andGate:"AND Gate",orGate:"OR Gate",notGate:"NOT Gate",group:"Group",subscribeLtp:"Subscribe LTP",subscribeQuote:"Subscribe Quote",subscribeDepth:"Subscribe Depth",unsubscribe:"Unsubscribe"};function Sl(a){for(const n of Object.values(Wt)){const o=n.find(p=>p.type===a);if(o)return o}return null}function Tl(){const{id:a}=Ss(),{nodes:n,selectedNodeId:o,updateNodeData:p,deleteNode:f,selectNode:w}=Ts(),[T,y]=u.useState(!1),k=n.find(s=>s.id===o),B=k?.type==="webhookTrigger",E=Ie({queryKey:ie.webhook(Number(a)),queryFn:()=>it(Number(a)),enabled:B&&!!a}),$=Ie({queryKey:ie.indexSymbols(),queryFn:ct,staleTime:1e3*60*60}),F=s=>$.data?.find(I=>I.value===s)?.lotSize||null,l=u.useCallback((s,S)=>{o&&p(o,{[s]:S})},[o,p]),z=u.useCallback(()=>{o&&f(o)},[o,f]),K=u.useCallback(()=>{w(null)},[w]),P=(s,S)=>{navigator.clipboard.writeText(s),L.success(`${S} copied`)};if(!k)return e.jsxs("div",{className:"w-80 border-l border-border bg-card flex flex-col h-full",children:[e.jsx("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Properties"})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(Ye,{className:"h-12 w-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{className:"text-sm",children:"Select a node to configure"})]})})]});const _=Sl(k.type||""),t=k.data,h=k.type||"unknown",J=ze[h]||_?.label||h;return e.jsxs("div",{className:"w-80 border-l border-border bg-card flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-sm",children:J}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Configure node"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:z,children:e.jsx(bt,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:K,children:e.jsx(Cs,{className:"h-4 w-4"})})]})]}),e.jsx(H,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 p-4",children:[h==="start"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Schedule Type"}),e.jsxs(j,{value:t.scheduleType||"daily",onValueChange:s=>l("scheduleType",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Ut.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),t.scheduleType!=="interval"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Time"}),e.jsx(x,{type:"time",className:"h-8",value:t.time||"09:15",onChange:s=>l("time",s.target.value)})]}),t.scheduleType==="interval"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Repeat Every"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{type:"number",min:"1",className:"h-8 w-20",value:t.intervalValue||1,onChange:s=>l("intervalValue",parseInt(s.target.value,10)||1)}),e.jsxs(j,{value:t.intervalUnit||"minutes",onValueChange:s=>l("intervalUnit",s),children:[e.jsx(N,{className:"h-8 flex-1",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"seconds",children:"Seconds"}),e.jsx(i,{value:"minutes",children:"Minutes"}),e.jsx(i,{value:"hours",children:"Hours"})]})]})]})]}),(t.scheduleType==="daily"||t.scheduleType==="weekly")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Run On Days"}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[e.jsx("button",{type:"button",onClick:()=>l("days",[0,1,2,3,4]),className:"rounded-md bg-muted px-2 py-1 text-[10px] hover:bg-accent",children:"Weekdays"}),e.jsx("button",{type:"button",onClick:()=>l("days",[5,6]),className:"rounded-md bg-muted px-2 py-1 text-[10px] hover:bg-accent",children:"Weekends"}),e.jsx("button",{type:"button",onClick:()=>l("days",[0,1,2,3,4,5,6]),className:"rounded-md bg-muted px-2 py-1 text-[10px] hover:bg-accent",children:"All"})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Yt.map(s=>{const S=t.days||[0,1,2,3,4],I=S.includes(s.value);return e.jsx("button",{type:"button",onClick:()=>l("days",I?S.filter(U=>U!==s.value):[...S,s.value].sort()),className:m("flex h-8 w-8 items-center justify-center rounded-md text-xs font-medium",I?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-accent"),children:s.label},s.value)})})]}),t.scheduleType==="once"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Date"}),e.jsx(x,{type:"date",className:"h-8",value:t.executeAt||"",onChange:s=>l("executeAt",s.target.value)})]})]}),h==="priceAlert"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Condition"}),e.jsxs(j,{value:t.condition||"above",onValueChange:s=>l("condition",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Nl.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Target Price"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",value:t.price||"",onChange:s=>l("price",parseFloat(s.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Trigger"}),e.jsxs(j,{value:t.trigger||"once",onValueChange:s=>l("trigger",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:gl.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Expiration"}),e.jsxs(j,{value:t.expiration||"none",onValueChange:s=>l("expiration",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:bl.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsx("div",{children:e.jsx(r,{className:"text-xs",children:"Play Sound"})}),e.jsx(Ne,{checked:t.playSound??!0,onCheckedChange:s=>l("playSound",s)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Alert Message"}),e.jsx(x,{className:"h-8",placeholder:"Custom message",value:t.message||"",onChange:s=>l("message",s.target.value)})]})]}),h==="webhookTrigger"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Label"}),e.jsx(x,{className:"h-8",placeholder:"TradingView Alert",value:t.label||"",onChange:s=>l("label",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"NSE",children:"NSE"}),e.jsx(i,{value:"BSE",children:"BSE"}),e.jsx(i,{value:"NFO",children:"NFO"}),e.jsx(i,{value:"CDS",children:"CDS"}),e.jsx(i,{value:"MCX",children:"MCX"})]})]})]}),e.jsx(Oe,{}),E.isLoading?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(ue,{className:"h-5 w-5 animate-spin"})}):E.data?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Webhook URL"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(x,{readOnly:!0,value:t.symbol?`${E.data.webhook_url}/${t.symbol}`:E.data.webhook_url,className:"font-mono text-[10px] h-8"}),e.jsx(M,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>P(t.symbol?`${E.data.webhook_url}/${t.symbol}`:E.data.webhook_url,"URL"),children:e.jsx(We,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Webhook Secret"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(x,{readOnly:!0,type:T?"text":"password",value:E.data.webhook_secret,className:"font-mono text-[10px] h-8 pr-8"}),e.jsx(M,{variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-8 w-8",onClick:()=>y(!T),children:T?e.jsx(yt,{className:"h-3 w-3"}):e.jsx(vt,{className:"h-3 w-3"})})]}),e.jsx(M,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>P(E.data.webhook_secret,"Secret"),children:e.jsx(We,{className:"h-3 w-3"})})]})]}),e.jsx("div",{className:m("rounded-lg border p-2 text-center text-xs",E.data.webhook_enabled?"border-green-500/30 bg-green-500/10 text-green-600":"border-yellow-500/30 bg-yellow-500/10 text-yellow-600"),children:E.data.webhook_enabled?"Webhook enabled":"Webhook disabled"})]}):e.jsx("div",{className:"rounded-lg border-yellow-500/30 bg-yellow-500/10 p-3 text-center text-xs text-yellow-600",children:"Save workflow first"})]}),h==="tomicControl"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Action"}),e.jsxs(j,{value:t.action||"stop",onValueChange:s=>l("action",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"start",children:"Start"}),e.jsx(i,{value:"pause",children:"Pause"}),e.jsx(i,{value:"resume",children:"Resume"}),e.jsx(i,{value:"stop",children:"Stop"})]})]})]}),t.action==="pause"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Pause Reason"}),e.jsx(x,{className:"h-8",placeholder:"Manual pause from flow",value:t.reason||"",onChange:s=>l("reason",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"tomicControl",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{tomicControl.runtime.runtime}}"]})]})]}),h==="tomicSignal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Instrument"}),e.jsx(x,{className:"h-8",placeholder:"NIFTY / BANKNIFTY / SENSEX",value:t.instrument||"",onChange:s=>l("instrument",s.target.value)})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Auto Select Selling Strategy"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Use snapshot(regime+top volatility) to pick IC/BPS/BCS"})]}),e.jsx(Ne,{checked:t.autoSelect||!1,onCheckedChange:s=>l("autoSelect",s)})]}),t.autoSelect?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Snapshot Variable"}),e.jsx(x,{className:"h-8",placeholder:"tomicSignals",value:t.snapshotVariable||"tomicSignals",onChange:s=>l("snapshotVariable",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Fallback Strategy"}),e.jsxs(j,{value:t.fallbackStrategy||"IRON_CONDOR",onValueChange:s=>l("fallbackStrategy",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"IRON_CONDOR",children:"IRON_CONDOR"}),e.jsx(i,{value:"BULL_PUT_SPREAD",children:"BULL_PUT_SPREAD"}),e.jsx(i,{value:"BEAR_CALL_SPREAD",children:"BEAR_CALL_SPREAD"})]})]})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Direction is forced to SELL for credit strategies in auto mode."})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Strategy Type"}),e.jsx(x,{className:"h-8",placeholder:"DITM_CALL / BULL_PUT_SPREAD / IRON_CONDOR",value:t.strategyType||"",onChange:s=>l("strategyType",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Direction"}),e.jsxs(j,{value:t.direction||"BUY",onValueChange:s=>l("direction",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"BUY",children:"BUY"}),e.jsx(i,{value:"SELL",children:"SELL"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsx(x,{className:"h-8",placeholder:"NSE_INDEX",value:t.exchange||"",onChange:s=>l("exchange",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:ee.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Lot Size"}),e.jsx(x,{type:"number",min:0,className:"h-8",value:t.lotSize||0,onChange:s=>l("lotSize",parseInt(s.target.value,10)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Confidence %"}),e.jsx(x,{type:"number",min:0,max:100,className:"h-8",value:t.confidence||0,onChange:s=>l("confidence",parseFloat(s.target.value)||0)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Entry Price"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",value:t.entryPrice||0,onChange:s=>l("entryPrice",parseFloat(s.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Stop Price"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",value:t.stopPrice||0,onChange:s=>l("stopPrice",parseFloat(s.target.value)||0)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Expiry Date (optional)"}),e.jsx(x,{className:"h-8",placeholder:"26FEB26",value:t.expiryDate||"",onChange:s=>l("expiryDate",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Legs JSON (optional)"}),e.jsx(G,{className:"min-h-[80px] font-mono text-xs",placeholder:'[{"offset":"OTM2","option_type":"CE","direction":"SELL","quantity":1}]',value:t.legsJson||"",onChange:s=>l("legsJson",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"tomicSignal",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{tomicSignal.pending_signals}}"]})]})]}),h==="tomicSnapshot"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Source"}),e.jsxs(j,{value:t.source||"status",onValueChange:s=>l("source",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"status",children:"Runtime Status"}),e.jsx(i,{value:"metrics",children:"Metrics"}),e.jsx(i,{value:"signals",children:"Signal Quality"}),e.jsx(i,{value:"positions",children:"Positions"}),e.jsx(i,{value:"journal",children:"Journal"}),e.jsx(i,{value:"analytics",children:"Analytics"}),e.jsx(i,{value:"risk",children:"Risk Telemetry"}),e.jsx(i,{value:"router",children:"Router Diagnostics"})]})]})]}),t.source==="signals"&&e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Run Live Scan"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Scan Sniper+Volatility during node execution"})]}),e.jsx(Ne,{checked:t.runScan??!0,onCheckedChange:s=>l("runScan",s)})]}),["journal","risk","router"].includes(t.source||"")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Limit"}),e.jsx(x,{type:"number",min:1,max:200,className:"h-8",value:t.limit||25,onChange:s=>l("limit",parseInt(s.target.value,10)||25)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"tomicSnapshot",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{tomicSnapshot.data}}"]})]})]}),h==="placeOrder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Action"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:me.map(s=>e.jsx("button",{type:"button",onClick:()=>l("action",s.value),className:m("rounded-lg border py-2 text-sm font-semibold",t.action===s.value?s.value==="BUY"?"bg-green-500/20 border-green-500 text-green-600":"bg-red-500/20 border-red-500 text-red-600":"border-border bg-muted"),children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Quantity"}),e.jsx(x,{type:"number",min:1,className:"h-8",value:t.quantity||1,onChange:s=>l("quantity",parseInt(s.target.value,10)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:ee.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Price Type"}),e.jsxs(j,{value:t.priceType||"MARKET",onValueChange:s=>l("priceType",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Me.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),(t.priceType==="LIMIT"||t.priceType==="SL")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Price"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",value:t.price||0,onChange:s=>l("price",parseFloat(s.target.value)||0)})]}),(t.priceType==="SL"||t.priceType==="SL-M")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Trigger Price"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",value:t.triggerPrice||0,onChange:s=>l("triggerPrice",parseFloat(s.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"orderResult",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{orderResult.orderid}}"]})]})]}),h==="smartOrder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Action"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:me.map(s=>e.jsx("button",{type:"button",onClick:()=>l("action",s.value),className:m("rounded-lg border py-2 text-sm font-semibold",t.action===s.value?s.value==="BUY"?"bg-green-500/20 border-green-500 text-green-600":"bg-red-500/20 border-red-500 text-red-600":"border-border bg-muted"),children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Quantity"}),e.jsx(x,{type:"number",min:1,className:"h-8",value:t.quantity||1,onChange:s=>l("quantity",parseInt(s.target.value,10)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Position Size"}),e.jsx(x,{type:"number",className:"h-8",value:t.positionSize??0,onChange:s=>{const S=parseInt(s.target.value,10);l("positionSize",isNaN(S)?0:S)}}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Target position (positive=long, negative=short, 0=use quantity)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:ee.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"smartResult",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="optionsOrder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Underlying"}),e.jsxs(j,{value:t.underlying||"NIFTY",onValueChange:s=>{l("underlying",s);const S=ge.find(U=>U.value===s);S&&l("exchange",S.exchange);const I=F(s);I&&l("quantity",I)},children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:ge.map(s=>e.jsxs(i,{value:s.value,children:[s.label," (",s.exchange,")"]},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Expiry"}),e.jsxs(j,{value:t.expiryType||"current_week",onValueChange:s=>l("expiryType",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Xe.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Strike Offset"}),e.jsxs(j,{value:t.offset||"ATM",onValueChange:s=>l("offset",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:_t.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Option Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Ft.map(s=>e.jsx("button",{type:"button",onClick:()=>l("optionType",s.value),className:m("rounded-lg border py-2 text-sm font-semibold",t.optionType===s.value?s.value==="CE"?"bg-green-500/20 border-green-500 text-green-600":"bg-red-500/20 border-red-500 text-red-600":"border-border bg-muted"),children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Action"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:me.map(s=>e.jsx("button",{type:"button",onClick:()=>l("action",s.value),className:m("rounded-lg border py-2 text-sm font-semibold",t.action===s.value?s.value==="BUY"?"bg-green-500/20 border-green-500 text-green-600":"bg-red-500/20 border-red-500 text-red-600":"border-border bg-muted"),children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Quantity (Lots)"}),e.jsx(x,{type:"number",min:1,className:"h-8",value:t.quantity||1,onChange:s=>l("quantity",parseInt(s.target.value,10)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"MIS",children:"MIS"}),e.jsx(i,{value:"NRML",children:"NRML"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Price Type"}),e.jsxs(j,{value:t.priceType||"MARKET",onValueChange:s=>l("priceType",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Me.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),(t.priceType==="LIMIT"||t.priceType==="SL")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Price"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",value:t.price||0,onChange:s=>l("price",parseFloat(s.target.value)||0)})]}),(t.priceType==="SL"||t.priceType==="SL-M")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Trigger Price"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",value:t.triggerPrice||0,onChange:s=>l("triggerPrice",parseFloat(s.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"optionOrder",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="optionsMultiOrder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Strategy"}),e.jsxs(j,{value:t.strategy||"straddle",onValueChange:s=>l("strategy",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Rt.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Underlying"}),e.jsxs(j,{value:t.underlying||"NIFTY",onValueChange:s=>{l("underlying",s);const S=ge.find(I=>I.value===s);S&&l("exchange",S.exchange)},children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:ge.map(s=>e.jsxs(i,{value:s.value,children:[s.label," (",s.exchange,")"]},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Expiry"}),e.jsxs(j,{value:t.expiryType||"current_week",onValueChange:s=>l("expiryType",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Xe.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Action"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:me.map(s=>e.jsx("button",{type:"button",onClick:()=>l("action",s.value),className:m("rounded-lg border py-2 text-sm font-semibold",t.action===s.value?s.value==="BUY"?"bg-green-500/20 border-green-500 text-green-600":"bg-red-500/20 border-red-500 text-red-600":"border-border bg-muted"),children:s.label},s.value))}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:t.action==="BUY"?"Long strategy":"Short strategy"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Quantity (Lots)"}),e.jsx(x,{type:"number",min:1,className:"h-8",value:t.quantity||1,onChange:s=>l("quantity",parseInt(s.target.value,10)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"MIS",children:"MIS"}),e.jsx(i,{value:"NRML",children:"NRML"})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-2",children:[e.jsx("p",{className:"text-[10px] font-medium mb-1.5",children:"Strategy Legs:"}),e.jsxs("div",{className:"space-y-0.5 text-[10px] font-mono",children:[t.strategy==="straddle"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ATM CE"}),e.jsx("span",{className:t.action==="BUY"?"text-green-600":"text-red-600",children:t.action||"SELL"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ATM PE"}),e.jsx("span",{className:t.action==="BUY"?"text-green-600":"text-red-600",children:t.action||"SELL"})]})]}),t.strategy==="strangle"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM2 CE"}),e.jsx("span",{className:t.action==="BUY"?"text-green-600":"text-red-600",children:t.action||"SELL"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM2 PE"}),e.jsx("span",{className:t.action==="BUY"?"text-green-600":"text-red-600",children:t.action||"SELL"})]})]}),t.strategy==="iron_condor"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM2 CE"}),e.jsx("span",{className:"text-red-600",children:"SELL"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM4 CE"}),e.jsx("span",{className:"text-green-600",children:"BUY"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM2 PE"}),e.jsx("span",{className:"text-red-600",children:"SELL"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM4 PE"}),e.jsx("span",{className:"text-green-600",children:"BUY"})]})]}),t.strategy==="bull_call_spread"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ATM CE"}),e.jsx("span",{className:"text-green-600",children:"BUY"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM2 CE"}),e.jsx("span",{className:"text-red-600",children:"SELL"})]})]}),t.strategy==="bear_put_spread"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ATM PE"}),e.jsx("span",{className:"text-green-600",children:"BUY"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM2 PE"}),e.jsx("span",{className:"text-red-600",children:"SELL"})]})]}),t.strategy==="custom"&&e.jsx("p",{className:"text-muted-foreground",children:"Configure custom legs via API"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"multiLegOrder",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="basketOrder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Basket Name"}),e.jsx(x,{className:"h-8",placeholder:"Morning Portfolio",value:t.basketName||"",onChange:s=>l("basketName",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Orders (SYMBOL,EXCHANGE,ACTION,QTY)"}),e.jsx(G,{className:"min-h-[100px] text-xs font-mono",placeholder:`RELIANCE,NSE,BUY,10
INFY,NSE,BUY,5
SBIN,NSE,SELL,20`,value:t.orders||"",onChange:s=>l("orders",s.target.value)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Supported exchanges: NSE, BSE, NFO, BFO, CDS, BCD, MCX"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:ee.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Price Type"}),e.jsxs(j,{value:t.priceType||"MARKET",onValueChange:s=>l("priceType",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Me.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"basketResult",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{basketResult.results}}"," in other nodes"]})]})]}),h==="splitOrder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Action"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:me.map(s=>e.jsx("button",{type:"button",onClick:()=>l("action",s.value),className:m("rounded-lg border py-2 text-sm font-semibold",t.action===s.value?s.value==="BUY"?"bg-green-500/20 border-green-500 text-green-600":"bg-red-500/20 border-red-500 text-red-600":"border-border bg-muted"),children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Total Quantity"}),e.jsx(x,{type:"number",min:1,className:"h-8",value:t.quantity||100,onChange:s=>l("quantity",parseInt(s.target.value,10)||100)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Split Size"}),e.jsx(x,{type:"number",min:1,className:"h-8",value:t.splitSize||50,onChange:s=>l("splitSize",parseInt(s.target.value,10)||50)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:ee.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"splitResult",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{splitResult.results}}"," in other nodes"]})]}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Splits into ",Math.ceil((t.quantity||100)/(t.splitSize||50))," orders"]})]}),h==="cancelOrder"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Order ID"}),e.jsx(x,{className:"h-8",placeholder:"{{orderResult.orderid}}",value:t.orderId||"",onChange:s=>l("orderId",s.target.value)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Use variable from Place Order"})]}),h==="cancelAllOrders"&&e.jsx("div",{className:"rounded-lg border bg-muted/30 p-3",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cancels all open orders. No configuration needed."})}),h==="closePositions"&&e.jsx("div",{className:"rounded-lg border bg-muted/30 p-3",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Closes all open positions. No configuration needed."})}),h==="modifyOrder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Order ID"}),e.jsx(x,{className:"h-8",placeholder:"{{orderResult.orderid}}",value:t.orderId||"",onChange:s=>l("orderId",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"New Price"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",placeholder:"Leave empty to keep",value:t.newPrice||"",onChange:s=>l("newPrice",parseFloat(s.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"New Quantity"}),e.jsx(x,{type:"number",min:1,className:"h-8",placeholder:"Leave empty to keep",value:t.newQuantity||"",onChange:s=>l("newQuantity",parseInt(s.target.value,10)||0)})]})]}),h==="getQuote"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"quote",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{quote.data.ltp}}"]})]})]}),h==="getDepth"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"SBIN",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"depth",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{depth.data.bids[0].price}}"]})]})]}),h==="getOrderStatus"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Order ID"}),e.jsx(x,{className:"h-8",placeholder:"{{orderResult.orderid}}",value:t.orderId||"",onChange:s=>l("orderId",s.target.value)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Use variable from Place Order node"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"orderStatus",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{orderStatus.data.order_status}}"]})]})]}),h==="openPosition"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:ee.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"position",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{position.quantity}}"]})]})]}),h==="history"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"SBIN",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Interval"}),e.jsxs(j,{value:t.interval||"1d",onValueChange:s=>l("interval",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"1m",children:"1 Min"}),e.jsx(i,{value:"5m",children:"5 Min"}),e.jsx(i,{value:"15m",children:"15 Min"}),e.jsx(i,{value:"1h",children:"1 Hour"}),e.jsx(i,{value:"1d",children:"Daily"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Days"}),e.jsx(x,{type:"number",min:1,max:365,className:"h-8",value:t.days||30,onChange:s=>l("days",parseInt(s.target.value,10)||30)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"ohlcv",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="expiry"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"NIFTY",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NFO",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"NFO",children:"NFO"}),e.jsx(i,{value:"BFO",children:"BFO"}),e.jsx(i,{value:"MCX",children:"MCX"}),e.jsx(i,{value:"CDS",children:"CDS"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"expiries",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{expiries.data[0]}}"]})]})]}),h==="multiQuotes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbols (comma separated)"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE,INFY,TCS",value:t.symbols||"",onChange:s=>l("symbols",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"quotes",value:t.outputVariable||"quotes",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{quotes.results[0].data.ltp}}"]})]})]}),h==="symbol"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"NIFTY30DEC25FUT",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NFO",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"symbolInfo",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{symbolInfo.data.lotsize}}"]})]})]}),h==="optionSymbol"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Underlying"}),e.jsx(x,{className:"h-8",placeholder:"NIFTY",value:t.underlying||"",onChange:s=>l("underlying",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE_INDEX",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"NSE_INDEX",children:"NSE Index"}),e.jsx(i,{value:"BSE_INDEX",children:"BSE Index"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Expiry Date"}),e.jsx(x,{className:"h-8",placeholder:"30DEC25",value:t.expiryDate||"",onChange:s=>l("expiryDate",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Strike Offset"}),e.jsxs(j,{value:t.offset||"ATM",onValueChange:s=>l("offset",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"ATM",children:"ATM"}),e.jsx(i,{value:"ITM1",children:"ITM 1"}),e.jsx(i,{value:"ITM2",children:"ITM 2"}),e.jsx(i,{value:"OTM1",children:"OTM 1"}),e.jsx(i,{value:"OTM2",children:"OTM 2"}),e.jsx(i,{value:"OTM3",children:"OTM 3"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Option Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["CE","PE"].map(s=>e.jsx("button",{type:"button",onClick:()=>l("optionType",s),className:m("rounded-lg border py-2 text-sm font-semibold",t.optionType===s?s==="CE"?"bg-green-500/20 border-green-500 text-green-600":"bg-red-500/20 border-red-500 text-red-600":"border-border bg-muted"),children:s==="CE"?"Call":"Put"},s))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"optionSym",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="orderBook"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"orders",value:t.outputVariable||"orders",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{orders.data.orders}}"]})]}),h==="tradeBook"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"trades",value:t.outputVariable||"trades",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{trades.data}}"]})]}),h==="positionBook"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"positions",value:t.outputVariable||"positions",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{positions.data}}"]})]}),h==="syntheticFuture"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Underlying"}),e.jsx(x,{className:"h-8",placeholder:"NIFTY",value:t.underlying||"",onChange:s=>l("underlying",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE_INDEX",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"NSE_INDEX",children:"NSE Index"}),e.jsx(i,{value:"BSE_INDEX",children:"BSE Index"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Expiry Date"}),e.jsx(x,{className:"h-8",placeholder:"25NOV25",value:t.expiryDate||"",onChange:s=>l("expiryDate",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"synthFuture",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{synthFuture.synthetic_future_price}}"]})]})]}),h==="optionChain"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Underlying"}),e.jsx(x,{className:"h-8",placeholder:"NIFTY",value:t.underlying||"",onChange:s=>l("underlying",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE_INDEX",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"NSE_INDEX",children:"NSE Index"}),e.jsx(i,{value:"BSE_INDEX",children:"BSE Index"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Expiry Date"}),e.jsx(x,{className:"h-8",placeholder:"30DEC25",value:t.expiryDate||"",onChange:s=>l("expiryDate",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Strike Count"}),e.jsx(x,{type:"number",className:"h-8",placeholder:"10 (empty=full)",value:t.strikeCount||"",onChange:s=>l("strikeCount",parseInt(s.target.value,10)||void 0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"chain",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{chain.atm_strike}}"]})]})]}),h==="holidays"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Year"}),e.jsx(x,{type:"number",className:"h-8",placeholder:String(new Date().getFullYear()),value:t.year||"",onChange:s=>l("year",parseInt(s.target.value,10)||void 0)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Empty = current year"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"holidays",value:t.outputVariable||"holidays",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="timings"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Date"}),e.jsx(x,{type:"date",className:"h-8",value:t.date||"",onChange:s=>l("date",s.target.value)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Empty = today"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"timings",value:t.outputVariable||"timings",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="holdings"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"holdings",value:t.outputVariable||"holdings",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{holdings.data[0].symbol}}"]})]}),h==="funds"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"funds",value:t.outputVariable||"funds",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{funds.data.availablecash}}"]})]}),h==="margin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Positions (JSON)"}),e.jsx(G,{className:"min-h-[100px] text-xs font-mono",placeholder:'[{"symbol": "NIFTY25DEC25FUT", "exchange": "NFO", "action": "BUY", "quantity": 75}]',value:t.positionsJson||"",onChange:s=>l("positionsJson",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"marginResult",value:t.outputVariable||"marginResult",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="subscribeLtp"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"ltp",value:t.outputVariable||"ltp",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Real-time: ","{{ltp}}"]})]})]}),h==="subscribeQuote"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"quote",value:t.outputVariable||"quote",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{quote.ltp}}",", ","{{quote.open}}"]})]})]}),h==="subscribeDepth"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"depth",value:t.outputVariable||"depth",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{depth.bids[0].price}}"]})]})]}),h==="unsubscribe"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Stream Type"}),e.jsxs(j,{value:t.streamType||"all",onValueChange:s=>l("streamType",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"ltp",children:"LTP Only"}),e.jsx(i,{value:"quote",children:"Quote Only"}),e.jsx(i,{value:"depth",children:"Depth Only"}),e.jsx(i,{value:"all",children:"All Streams"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"Empty = all symbols",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]})]}),h==="delay"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Wait Duration"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{type:"number",min:1,className:"h-8 flex-1",value:t.delayValue||1,onChange:s=>l("delayValue",parseInt(s.target.value,10)||1)}),e.jsxs(j,{value:t.delayUnit||"seconds",onValueChange:s=>l("delayUnit",s),children:[e.jsx(N,{className:"h-8 w-28",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"seconds",children:"Seconds"}),e.jsx(i,{value:"minutes",children:"Minutes"}),e.jsx(i,{value:"hours",children:"Hours"})]})]})]})]})}),h==="waitUntil"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Target Time"}),e.jsx(x,{type:"time",className:"h-8",value:t.targetTime||"09:30",onChange:s=>l("targetTime",s.target.value)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Workflow pauses until this time"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Label"}),e.jsx(x,{className:"h-8",placeholder:"Wait for Entry",value:t.label||"",onChange:s=>l("label",s.target.value)})]})]}),h==="log"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Log Level"}),e.jsxs(j,{value:t.level||"info",onValueChange:s=>l("level",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:vl.map(s=>e.jsx(i,{value:s.value,children:e.jsx("span",{className:s.color,children:s.label})},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Message"}),e.jsx(G,{className:"min-h-[80px]",placeholder:"Log message with {{variables}}",value:t.message||"",onChange:s=>l("message",s.target.value)})]})]}),h==="telegramAlert"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"OpenAlgo Username"}),e.jsx(x,{className:"h-8",placeholder:"Your login ID",value:t.username||"",onChange:s=>l("username",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Message"}),e.jsx(G,{className:"min-h-[80px]",placeholder:"Order placed for {{orderResult.symbol}}",value:t.message||"",onChange:s=>l("message",s.target.value)})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-2",children:[e.jsx("p",{className:"text-[10px] font-medium mb-1",children:"Variables:"}),e.jsxs("p",{className:"text-[9px] font-mono text-muted-foreground",children:["{{orderResult.orderid}}",", ","{{quote.ltp}}",", ","{{timestamp}}"]})]})]}),h==="variable"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Variable Name"}),e.jsx(x,{className:"h-8",placeholder:"myLTP",value:t.variableName||"",onChange:s=>l("variableName",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use: ",`{{${t.variableName||"varName"}}}`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Operation"}),e.jsxs(j,{value:t.operation||"set",onValueChange:s=>l("operation",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:yl.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),["set","add","subtract","multiply","divide","append","parse_json"].includes(t.operation)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:t.operation==="parse_json"?"JSON String":"Value"}),t.operation==="parse_json"?e.jsx(G,{className:"min-h-[80px] font-mono",placeholder:'{"key": "value"}',value:String(t.value||""),onChange:s=>l("value",s.target.value)}):e.jsx(x,{className:"h-8",placeholder:"Value or {{variable}}",value:String(t.value||""),onChange:s=>l("value",s.target.value)})]}),["get","stringify"].includes(t.operation)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Source Variable"}),e.jsx(x,{className:"h-8",placeholder:"quoteData",value:t.sourceVariable||"",onChange:s=>l("sourceVariable",s.target.value)})]}),t.operation==="get"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"JSON Path"}),e.jsx(x,{className:"h-8",placeholder:"data.ltp",value:t.jsonPath||"",onChange:s=>l("jsonPath",s.target.value)})]})]}),h==="mathExpression"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Expression"}),e.jsx(G,{className:"min-h-[80px] font-mono",placeholder:"({{ltp}} * {{lotSize}}) + {{brokerage}}",value:t.expression||"",onChange:s=>l("expression",s.target.value)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Supports: +, -, *, /, %, ** (power)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"result",value:t.outputVariable||"result",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="httpRequest"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Method"}),e.jsx("div",{className:"grid grid-cols-5 gap-1",children:Cl.map(s=>e.jsx("button",{type:"button",onClick:()=>l("method",s.value),className:m("rounded-md border py-1.5 text-[10px] font-bold",t.method===s.value?"bg-primary text-primary-foreground":"border-border bg-muted"),children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"URL"}),e.jsx(x,{className:"h-8",placeholder:"https://api.example.com",value:t.url||"",onChange:s=>l("url",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Headers (JSON)"}),e.jsx(G,{className:"min-h-[60px] font-mono text-xs",placeholder:'{"Authorization": "Bearer {{token}}"}',value:t.headers||"",onChange:s=>l("headers",s.target.value)})]}),["POST","PUT","PATCH"].includes(t.method||"GET")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Body (JSON)"}),e.jsx(G,{className:"min-h-[80px] font-mono text-xs",placeholder:'{"symbol": "{{webhook.symbol}}"}',value:t.body||"",onChange:s=>l("body",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Timeout (ms)"}),e.jsx(x,{type:"number",min:1e3,max:6e4,className:"h-8",value:t.timeout||3e4,onChange:s=>l("timeout",parseInt(s.target.value,10)||3e4)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"apiResponse",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{apiResponse.data}}"]})]})]}),h==="timeWindow"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Start Time"}),e.jsx(x,{type:"time",className:"h-8",value:t.startTime||"09:15",onChange:s=>l("startTime",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"End Time"}),e.jsx(x,{type:"time",className:"h-8",value:t.endTime||"15:30",onChange:s=>l("endTime",s.target.value)})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Invert Condition"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Trigger outside window"})]}),e.jsx(Ne,{checked:t.invertCondition||!1,onCheckedChange:s=>l("invertCondition",s)})]})]}),h==="timeCondition"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Condition Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:wl.map(s=>e.jsx("button",{type:"button",onClick:()=>l("conditionType",s.value),className:m("rounded-lg border py-2 text-sm font-semibold",t.conditionType===s.value?s.value==="entry"?"bg-green-500/20 border-green-500 text-green-600":s.value==="exit"?"bg-red-500/20 border-red-500 text-red-600":"bg-primary text-primary-foreground":"border-border bg-muted"),children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Operator"}),e.jsxs(j,{value:t.operator||">=",onValueChange:s=>l("operator",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:fl.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Target Time"}),e.jsx(x,{type:"time",className:"h-8",value:t.targetTime||"09:30",onChange:s=>l("targetTime",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Label"}),e.jsx(x,{className:"h-8",placeholder:"Market Open Entry",value:t.label||"",onChange:s=>l("label",s.target.value)})]})]}),h==="priceCondition"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Field"}),e.jsxs(j,{value:t.field||"ltp",onValueChange:s=>l("field",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"ltp",children:"LTP"}),e.jsx(i,{value:"open",children:"Open"}),e.jsx(i,{value:"high",children:"High"}),e.jsx(i,{value:"low",children:"Low"}),e.jsx(i,{value:"prev_close",children:"Prev Close"}),e.jsx(i,{value:"change_percent",children:"Change %"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Operator"}),e.jsxs(j,{value:t.operator||">",onValueChange:s=>l("operator",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:">",children:">"}),e.jsx(i,{value:"<",children:"<"}),e.jsx(i,{value:"==",children:"="}),e.jsx(i,{value:">=",children:">="}),e.jsx(i,{value:"<=",children:"<="}),e.jsx(i,{value:"!=",children:"!="})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Value"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",value:t.value||"",onChange:s=>l("value",parseFloat(s.target.value)||0)})]})]}),h==="positionCheck"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:ee.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Condition"}),e.jsxs(j,{value:t.condition||"exists",onValueChange:s=>l("condition",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"exists",children:"Has Position"}),e.jsx(i,{value:"not_exists",children:"No Position"}),e.jsx(i,{value:"quantity_above",children:"Qty Above"}),e.jsx(i,{value:"quantity_below",children:"Qty Below"}),e.jsx(i,{value:"pnl_above",children:"P&L Above"}),e.jsx(i,{value:"pnl_below",children:"P&L Below"})]})]})]}),["quantity_above","quantity_below","pnl_above","pnl_below"].includes(t.condition)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Threshold"}),e.jsx(x,{type:"number",className:"h-8",value:t.threshold||"",onChange:s=>l("threshold",parseFloat(s.target.value)||0)})]})]}),h==="fundCheck"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Minimum Available Funds"}),e.jsx(x,{type:"number",min:0,className:"h-8",placeholder:"10000",value:t.minAvailable||"",onChange:s=>l("minAvailable",parseFloat(s.target.value)||0)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Checks if margin is above this"})]}),h==="andGate"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Number of Inputs"}),e.jsxs(j,{value:String(t.inputCount||2),onValueChange:s=>l("inputCount",parseInt(s,10)),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"2",children:"2 inputs"}),e.jsx(i,{value:"3",children:"3 inputs"}),e.jsx(i,{value:"4",children:"4 inputs"}),e.jsx(i,{value:"5",children:"5 inputs"})]})]})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 text-xs",children:[e.jsx("p",{className:"font-medium mb-1",children:"AND Gate"}),e.jsx("p",{className:"text-muted-foreground",children:"Yes only if ALL conditions true"})]})]}),h==="orGate"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Number of Inputs"}),e.jsxs(j,{value:String(t.inputCount||2),onValueChange:s=>l("inputCount",parseInt(s,10)),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"2",children:"2 inputs"}),e.jsx(i,{value:"3",children:"3 inputs"}),e.jsx(i,{value:"4",children:"4 inputs"}),e.jsx(i,{value:"5",children:"5 inputs"})]})]})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 text-xs",children:[e.jsx("p",{className:"font-medium mb-1",children:"OR Gate"}),e.jsx("p",{className:"text-muted-foreground",children:"Yes if ANY condition true"})]})]}),h==="notGate"&&e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 text-xs",children:[e.jsx("p",{className:"font-medium mb-1",children:"NOT Gate"}),e.jsx("p",{className:"text-muted-foreground",children:"Inverts the condition. True becomes False, False becomes True."})]}),h==="group"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Group Name"}),e.jsx(x,{className:"h-8",placeholder:"Entry Logic",value:t.label||"",onChange:s=>l("label",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Color"}),e.jsxs(j,{value:t.color||"default",onValueChange:s=>l("color",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(i,{value:"default",children:"Default"}),e.jsx(i,{value:"blue",children:"Blue"}),e.jsx(i,{value:"green",children:"Green"}),e.jsx(i,{value:"red",children:"Red"}),e.jsx(i,{value:"purple",children:"Purple"}),e.jsx(i,{value:"orange",children:"Orange"})]})]})]})]}),!ze[h]&&e.jsxs(e.Fragment,{children:[_&&e.jsx("div",{className:"rounded-lg border bg-muted/30 p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ft,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium",children:_.label}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:_.description})]})]})}),e.jsx(Oe,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Node Label"}),e.jsx(x,{className:"h-8",placeholder:"Enter label...",value:t.label||"",onChange:s=>l("label",s.target.value)})]})]}),e.jsx(Oe,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Node ID"}),e.jsx("code",{className:"block text-[10px] bg-muted px-2 py-1 rounded font-mono",children:k.id})]})]})})]})}function kl({logs:a,status:n,onClose:o}){const p=()=>{switch(n){case"running":return e.jsx(A,{className:"h-4 w-4 animate-pulse text-amber-500"});case"success":return e.jsx(Ge,{className:"h-4 w-4 text-green-500"});case"error":return e.jsx(de,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Be,{className:"h-4 w-4 text-muted-foreground"})}},f=()=>{switch(n){case"running":return"Executing...";case"success":return"Completed";case"error":return"Failed";default:return"Ready"}},w=y=>{try{return new Date(y).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}catch{return y}},T=y=>{switch(y){case"error":return e.jsx(de,{className:"h-3.5 w-3.5 text-red-500"});case"warning":return e.jsx(wt,{className:"h-3.5 w-3.5 text-amber-500"});default:return e.jsx(Ge,{className:"h-3.5 w-3.5 text-green-500"})}};return e.jsxs("div",{className:"w-80 border-l border-border bg-card flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[p(),e.jsx("span",{className:"font-medium",children:"Execution Log"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:m("text-xs px-2 py-0.5 rounded-full",n==="running"&&"bg-amber-500/10 text-amber-500",n==="success"&&"bg-green-500/10 text-green-500",n==="error"&&"bg-red-500/10 text-red-500",n==="idle"&&"bg-muted text-muted-foreground"),children:f()}),e.jsx(M,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:o,children:e.jsx(Cs,{className:"h-4 w-4"})})]})]}),e.jsx(H,{className:"flex-1",children:e.jsx("div",{className:"p-3 space-y-2",children:a.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[e.jsx(Be,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No logs yet"}),e.jsx("p",{className:"text-xs mt-1",children:'Click "Run Now" to execute the workflow'})]}):a.map((y,k)=>e.jsx("div",{className:m("rounded-lg border p-2.5 text-sm",y.level==="error"&&"border-red-500/30 bg-red-500/5",y.level==="warning"&&"border-amber-500/30 bg-amber-500/5",y.level==="info"&&"border-border bg-background"),children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"mt-0.5",children:T(y.level)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:w(y.time)})}),e.jsx("p",{className:m("text-sm break-words",y.level==="error"&&"text-red-500",y.level==="warning"&&"text-amber-500"),children:y.message})]})]})},k))})}),a.length>0&&e.jsx("div",{className:"border-t border-border px-4 py-2 text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[a.length," log entries"]}),e.jsxs("span",{children:[a.filter(y=>y.level==="error").length," errors"]})]})})]})}let Ma=0;const El=()=>`node_${Ma++}`;function Ol(){const{id:a}=Ss(),n=At(),o=et(),p=u.useRef(null),{screenToFlowPosition:f}=Ke(),{name:w,nodes:T,edges:y,selectedNodeId:k,isModified:B,setWorkflow:E,setName:$,onNodesChange:F,onEdgesChange:l,onConnect:z,addNode:K,selectNode:P,selectEdge:_,deleteSelected:t,markSaved:h,resetWorkflow:J}=Ts(),[s,S]=u.useState(!1),[I,U]=u.useState(!1),[ye,Y]=u.useState([]),[Z,W]=u.useState("idle"),{mode:ae,appMode:D,toggleMode:oe,toggleAppMode:ve,isTogglingMode:he}=st(),{user:fe,logout:we}=at(),Ce=async()=>{try{await nt.logout(),we(),n("/login")}catch{L.error("Logout failed","system")}},Se=async()=>{await ve()},{isLoading:Te,data:V}=Ie({queryKey:ie.workflow(Number(a)),queryFn:()=>pt(Number(a)),enabled:!!a});u.useEffect(()=>{if(V){const v=V.nodes||[],R=(V.edges||[]).map(xe=>({...xe,type:"insertable",animated:!0}));E({id:V.id,name:V.name,description:V.description||"",nodes:v,edges:R}),S(V.is_active),Ma=Math.max(0,...v.map(xe=>{const Ue=xe.id.match(/node_(\d+)/);return Ue?parseInt(Ue[1]):0}))+1}},[V,E]),u.useEffect(()=>()=>{J()},[J]);const te=je({mutationFn:()=>dt(Number(a),{name:w,nodes:T,edges:y}),onSuccess:()=>{h(),o.invalidateQueries({queryKey:ie.workflows()}),L.success("Workflow saved","flow")},onError:v=>{L.error(v.message,"flow")}}),ke=je({mutationFn:()=>ot(Number(a)),onSuccess:()=>{S(!0),o.invalidateQueries({queryKey:ie.workflow(Number(a))}),L.success("Workflow activated","flow")},onError:v=>{L.error(v.message,"flow")}}),Ee=je({mutationFn:()=>xt(Number(a)),onSuccess:()=>{S(!1),o.invalidateQueries({queryKey:ie.workflow(Number(a))}),L.success("Workflow deactivated","flow")},onError:v=>{L.error(v.message,"flow")}}),Re=je({mutationFn:()=>(W("running"),Y([]),U(!0),mt(Number(a))),onSuccess:v=>{W(v.status==="success"?"success":"error"),v.logs&&Y(v.logs),v.status==="success"?L.success(v.message||"Execution completed","flow"):L.error(v.message||"Execution failed","flow")},onError:v=>{W("error"),Y([{time:new Date().toISOString(),message:v.message,level:"error"}]),L.error(v.message,"flow")}});u.useEffect(()=>{const v=C=>{const R=C.target;R.tagName==="INPUT"||R.tagName==="TEXTAREA"||R.isContentEditable||((C.key==="Delete"||C.key==="Backspace")&&k&&(C.preventDefault(),t()),(C.ctrlKey||C.metaKey)&&C.key==="s"&&(C.preventDefault(),B&&!te.isPending&&te.mutate()),C.key==="Escape"&&P(null),(C.key==="?"||C.shiftKey&&C.key==="/")&&n("/flow/shortcuts"))};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[k,t,P,B,te,n]);const Ia=u.useCallback((v,C)=>{v.dataTransfer.setData("application/reactflow",C),v.dataTransfer.effectAllowed="move"},[]),Va=u.useCallback(v=>{v.preventDefault(),v.dataTransfer.dropEffect="move"},[]),Pa=u.useCallback(v=>{v.preventDefault();const C=v.dataTransfer.getData("application/reactflow");if(!C||!p.current)return;const R=f({x:v.clientX,y:v.clientY}),q=ks[C]||{},xe={id:El(),type:C,position:R,data:{...q}};K(xe)},[f,K]),La=u.useCallback((v,C)=>{P(C.id)},[P]),Ba=u.useCallback(()=>{P(null)},[P]),Da=u.useCallback((v,C)=>{_(C.id)},[_]),Aa=u.useCallback(async()=>{try{const v=await ut(Number(a)),C=new Blob([JSON.stringify(v,null,2)],{type:"application/json"}),R=URL.createObjectURL(C),q=document.createElement("a");q.href=R,q.download=`${v.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.json`,document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(R),L.success("Workflow exported","flow")}catch(v){L.error(v instanceof Error?v.message:"Export failed","flow")}},[a]);return!a||a==="undefined"||isNaN(Number(a))?e.jsxs("div",{className:"flex h-screen flex-col bg-background text-foreground",children:[e.jsxs("div",{className:"h-12 border-b border-border flex items-center px-2 bg-card/50",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx("img",{src:"/images/android-chrome-192x192.png",alt:"OpenAlgo",className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold text-sm",children:"openalgo"})]}),e.jsx("div",{className:"flex-1"})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Invalid workflow ID"}),e.jsxs(M,{onClick:()=>n("/flow"),children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Back to Workflows"]})]})]}):Te?e.jsxs("div",{className:"flex h-screen flex-col bg-background text-foreground",children:[e.jsxs("div",{className:"h-12 border-b border-border flex items-center px-2 bg-card/50",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx("img",{src:"/images/android-chrome-192x192.png",alt:"OpenAlgo",className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold text-sm",children:"openalgo"})]}),e.jsx("div",{className:"flex-1"})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(ue,{className:"h-8 w-8 animate-spin text-primary"})})]}):e.jsxs("div",{className:"flex h-screen flex-col bg-background text-foreground",children:[e.jsxs("div",{className:"h-12 border-b border-border flex items-center px-2 bg-card/50",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx("img",{src:"/images/android-chrome-192x192.png",alt:"OpenAlgo",className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold text-sm",children:"openalgo"})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Flow Editor"})}),e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsxs(tt,{variant:D==="live"?"default":"secondary",className:m("text-xs",D==="analyzer"&&"bg-purple-500 hover:bg-purple-600 text-white"),children:[e.jsx("span",{className:"hidden sm:inline",children:D==="live"?"Live Mode":"Analyze Mode"}),e.jsx("span",{className:"sm:hidden",children:D==="live"?"Live":"Analyze"})]}),e.jsx(M,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:Se,disabled:he,title:`Switch to ${D==="live"?"Analyze":"Live"} mode`,children:he?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):D==="live"?e.jsx(Fe,{className:"h-4 w-4"}):e.jsx(pe,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:oe,disabled:D!=="live",title:ae==="light"?"Switch to dark mode":"Switch to light mode",children:ae==="light"?e.jsx(Ct,{className:"h-4 w-4"}):e.jsx(St,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"sm",className:"h-7 text-xs",asChild:!0,children:e.jsxs(Qe,{to:"/dashboard",children:[e.jsx(Tt,{className:"h-3.5 w-3.5 mr-1.5"}),"Dashboard"]})}),e.jsxs(Ve,{children:[e.jsx(Pe,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full bg-primary text-primary-foreground",children:e.jsx("span",{className:"text-sm font-medium",children:fe?.username?.[0]?.toUpperCase()||"O"})})}),e.jsxs(Le,{align:"end",className:"w-56",children:[lt.map(v=>e.jsxs(Q,{onSelect:()=>n(v.href),className:"cursor-pointer",children:[e.jsx(v.icon,{className:"h-4 w-4 mr-2"}),v.label]},v.href)),e.jsx(Q,{asChild:!0,children:e.jsxs("a",{href:"https://docs.openalgo.in",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[e.jsx(kt,{className:"h-4 w-4"}),"Docs"]})}),e.jsx(rt,{}),e.jsxs(Q,{onClick:Ce,className:"text-destructive focus:text-destructive",children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between border-b border-border bg-card px-4 py-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>n("/flow"),children:e.jsx(qe,{className:"h-4 w-4"})}),e.jsx(x,{value:w,onChange:v=>$(v.target.value),className:"h-8 w-64 border-transparent bg-transparent px-2 font-medium hover:border-border focus:border-border"}),B&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"Unsaved"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>te.mutate(),disabled:te.isPending||!B,children:[te.isPending?e.jsx(ue,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Ot,{className:"mr-2 h-4 w-4"}),"Save"]}),s?e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>Ee.mutate(),disabled:Ee.isPending,children:[Ee.isPending?e.jsx(ue,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Mt,{className:"mr-2 h-4 w-4"}),"Deactivate"]}):e.jsxs(M,{size:"sm",onClick:()=>ke.mutate(),disabled:ke.isPending,children:[ke.isPending?e.jsx(ue,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(It,{className:"mr-2 h-4 w-4"}),"Activate"]}),e.jsxs(Ve,{children:[e.jsx(Pe,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"icon",children:e.jsx(Vt,{className:"h-4 w-4"})})}),e.jsxs(Le,{align:"end",children:[e.jsx(Q,{onClick:()=>Re.mutate(),disabled:Re.isPending,children:"Run Now"}),e.jsxs(Q,{onClick:()=>U(!I),children:[e.jsx(Be,{className:"mr-2 h-4 w-4"}),I?"Hide Logs":"Show Logs"]}),e.jsxs(Q,{onClick:Aa,children:[e.jsx(Pt,{className:"mr-2 h-4 w-4"}),"Export Workflow"]}),e.jsx(Q,{asChild:!0,children:e.jsxs(Qe,{to:"/flow/shortcuts",children:[e.jsx(Lt,{className:"mr-2 h-4 w-4"}),"Keyboard Shortcuts"]})})]})]})]})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("div",{className:"w-56 flex-shrink-0",children:e.jsx(jl,{onDragStart:Ia})}),e.jsx("div",{ref:p,className:"flex-1",children:e.jsxs(qa,{nodes:T,edges:y,onNodesChange:F,onEdgesChange:l,onConnect:z,onNodeClick:La,onEdgeClick:Da,onPaneClick:Ba,onDragOver:Va,onDrop:Pa,nodeTypes:xl,edgeTypes:hl,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:null,defaultEdgeOptions:{type:"insertable",animated:!0},connectionLineStyle:{stroke:"hsl(var(--primary))",strokeWidth:2},connectionRadius:30,connectOnClick:!0,children:[e.jsx(Qa,{gap:16,size:1}),e.jsx(Ha,{}),e.jsx(Xa,{nodeStrokeWidth:3,pannable:!0,zoomable:!0}),e.jsx($a,{position:"bottom-center",className:"mb-4",children:e.jsxs("div",{className:m("flex items-center gap-2 rounded-lg border border-border bg-card px-3 py-2 text-sm",s&&"border-green-500/30 bg-green-500/5"),children:[e.jsx("div",{className:m("h-2 w-2 rounded-full",s?"bg-green-500":"bg-muted-foreground")}),e.jsx("span",{className:"text-muted-foreground",children:s?"Workflow active":"Workflow inactive"})]})})]})}),k&&e.jsx(Tl,{}),I&&!k&&e.jsx(kl,{logs:ye,status:Z,onClose:()=>U(!1)})]})]})}function Ql(){return e.jsx(Ga,{children:e.jsx(Ol,{})})}export{Ql as default};
